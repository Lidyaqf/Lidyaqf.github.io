<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>google sheet同步表格数据</title>
      <link href="/2025/08/28/google%20sheet%E5%90%8C%E6%AD%A5%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE/"/>
      <url>/2025/08/28/google%20sheet%E5%90%8C%E6%AD%A5%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>有个需求是根据一个表格的所有子表，同步到另个表格（包含子表）的数据，用google sheets里面的扩展程序里的apps 脚本功能，编写脚本。为什么要同步呢？因为原表默认是不可编辑的，打算同步过来后再进行编辑。sourceSpreadsheetId跟targetSpreadsheetId为google sheet 表格地址栏d后面的一串字符。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">synchronizeSheetsToAnotherFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> sourceSpreadsheetId = <span class="string">&quot;id1&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> targetSpreadsheetId = <span class="string">&quot;id2&quot;</span>; # 比如：1NOtSSvDwXrca8vqyZW6OqQJwGaCICMVguSz1-i72oqg</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> sourceSpreadsheet = <span class="title class_">SpreadsheetApp</span>.<span class="title function_">openById</span>(sourceSpreadsheetId);</span><br><span class="line">  <span class="keyword">const</span> targetSpreadsheet = <span class="title class_">SpreadsheetApp</span>.<span class="title function_">openById</span>(targetSpreadsheetId);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> sourceSheets = sourceSpreadsheet.<span class="title function_">getSheets</span>();</span><br><span class="line"></span><br><span class="line">  sourceSheets.<span class="title function_">forEach</span>(<span class="function"><span class="params">sheet</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> sheetName = sheet.<span class="title function_">getName</span>();</span><br><span class="line">    <span class="keyword">let</span> targetSheet = targetSpreadsheet.<span class="title function_">getSheetByName</span>(sheetName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!targetSheet) &#123;</span><br><span class="line">      targetSheet = targetSpreadsheet.<span class="title function_">insertSheet</span>(sheetName);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      targetSheet.<span class="title function_">clear</span>(); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> range = sheet.<span class="title function_">getDataRange</span>();</span><br><span class="line">    <span class="keyword">const</span> displayValues = range.<span class="title function_">getDisplayValues</span>(); </span><br><span class="line">    <span class="keyword">const</span> formats = range.<span class="title function_">getBackgrounds</span>();        </span><br><span class="line">    <span class="keyword">const</span> fontWeights = range.<span class="title function_">getFontWeights</span>();    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> targetRange = targetSheet.<span class="title function_">getRange</span>(<span class="number">1</span>, <span class="number">1</span>, displayValues.<span class="property">length</span>, displayValues[<span class="number">0</span>].<span class="property">length</span>);</span><br><span class="line">    targetRange.<span class="title function_">setValues</span>(displayValues); </span><br><span class="line">    targetRange.<span class="title function_">setBackgrounds</span>(formats); </span><br><span class="line">    targetRange.<span class="title function_">setFontWeights</span>(fontWeights);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>react+vite如何打包成apk</title>
      <link href="/2025/08/27/react+vite%E5%A6%82%E4%BD%95%E6%89%93%E5%8C%85%E6%88%90apk/"/>
      <url>/2025/08/27/react+vite%E5%A6%82%E4%BD%95%E6%89%93%E5%8C%85%E6%88%90apk/</url>
      
        <content type="html"><![CDATA[<p>最近遇到一个问题，如何把已经弄好的react移动端项目打包成apk呢？可以使用capacitor。<br>首先，可以先将依赖全部添加进去项目里面。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm add @capacitor/core @capacitor/cli</span><br><span class="line">npm install  @capacitor/android</span><br></pre></td></tr></table></figure><p>接着，可以先把自己的app初始化</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx cap init <span class="title class_">MyApp</span> com.<span class="property">example</span>.<span class="property">myapp</span>   #<span class="title class_">MyApp</span>是app名字，com.<span class="property">example</span>.<span class="property">myapp</span>是包名</span><br><span class="line">npx cap add android    #这条命令会生成android文件夹</span><br></pre></td></tr></table></figure><p>然后把项目进行打包，再通过npx cap copy命令让打包后的产物放进去android目录里面</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br><span class="line">npx cap copy</span><br></pre></td></tr></table></figure><p>紧接着可以通过命令去android平台啦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx cap open android</span><br></pre></td></tr></table></figure><p>默认自动打开android studio后，通过File -&gt; Sync Project with Gradle Files, 或者熟悉android studio的人可以通过右上角的按钮去同步。<br>如果发现Gradle失败，有可能是拉取gradle版本的包失败了，可以找到gradle-wrapper.properties文件，然后把distributionUrl的路径改为distributionUrl&#x3D;https:&#x2F;&#x2F;mirrors.cloud.tencent.com&#x2F;gradle&#x2F;gradle-8.11.1-all.zip，然后重新点击sync按钮就可以啦。</p><p>等sync 成功后，可以自己运行起来看效果，也可以直接用Build -&gt; Generate APP Bundles or APKs,选择 Generate APKs,就能成功打包apk包了。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>react组件通信方式</title>
      <link href="/2025/08/25/react%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/"/>
      <url>/2025/08/25/react%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<ul><li>通过Props和Props回调：用于父子组件的通信，子组件通过props接收父的数据，父组件将回调函数传给子组件，子组件调用这个回调函数，传数据给父组件。</li><li>通过Context API：可以共享状态的API，不需要按层级去传递。</li><li>Redux或Mobx：对于复杂的应用，可以用状态库来实现组件通信。</li><li>事件订阅模式：使用EventEmitter或者第三方库来实现跨组件的事件发布订阅。</li><li>Hooks：React的一些Hooks，比如useState，能实现不同组件的共享逻辑跟状态。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>中小学信息技术教学模版</title>
      <link href="/2025/08/21/%E4%B8%AD%E5%B0%8F%E5%AD%A6%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E6%95%99%E5%AD%A6%E6%A8%A1%E7%89%88/"/>
      <url>/2025/08/21/%E4%B8%AD%E5%B0%8F%E5%AD%A6%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E6%95%99%E5%AD%A6%E6%A8%A1%E7%89%88/</url>
      
        <content type="html"><![CDATA[<h1 id="《if-elif条件语句》逐字稿"><a href="#《if-elif条件语句》逐字稿" class="headerlink" title="《if-elif条件语句》逐字稿"></a>《if-elif条件语句》逐字稿</h1><p>  &emsp;&emsp;同学们，老师刚才留意到班级上的值日表，周一到周五有好多勤劳的小蜜蜂呀。老师想问下周一值日的同学有哪些举下手？诶，老师看见了。那么同学们记住这些周一值日的同学了吗？是的，总共有六位。那如果以三个班为单位，给你一个名字，你能快速给出这名同学是星期几值日吗？你们有什么好办法吗？请你，对了，可以自己用绕口令等方式背下来。还有更好的办法吗？请你，对了，可以利用程序的方式输出出来。那该使用什么语句来表示多个条件呢？今天我们就一起来学习python中的另一种条件语句if-elif-else<br/><br>&emsp;&emsp;现在请大家同桌两人为一小组，先来分析if-elif-else怎么实现同学名字对应星期几值日的问题，时间是8分钟。开始吧，时间到了，刚才在巡视的过程中，大家都在认真的讨论，那哪个小组代表想来分享你们的成果，你来说，你说想要判断同学是哪天值日的，只要输入他的名字，根据名字找到对应星期几输出就行了。还有补充的吗？第五小组，你们来说，他说可以弄五个数组对应星期一到星期五，把每个人的名字放进去对应的数组里，然后判断输出。你补充的非常关键。请坐。非常好，请坐，大家分析的很正确，说明大家有充分预习本节课的内容。<br/><br> &emsp;&emsp;接下来我们就综合大家的分析，请同学们自主思考，并画出流程图，时间是5分钟，开始吧，时间到了，请这位同学来展示你的流程图，你说首先输入学生的名字，假如小花在星期一的数组里，那么输出星期一，依次类推。现在请大家尝试写出多分支结构的语句，老师提示一下，条件子句的如果需要用elif来表示。我们请这位同学将他的答案写到黑板上，请同学们来看跟你写的一样吗？哪些地方需要修改？你说将最后一个elif应该写成else，是表达都不满足条件的话，执行else后面的语句。你说要注意缩进和冒号。大家观察的很仔细，希望同学们写的时候一定要认真。请大家利用学到的if-elif语句去编写刚才你们设计的算法。我看到大家都能准确的写出来了，并且都避免了刚才的问题。<br/><br>&emsp;&emsp;语句我们已经写出来了，那他的执行过程是什么呢？现在请同学们以同桌两人为一小组，进行讨论，一会我们请一名小组代表展示讲解，时间是7分钟，开始吧，我看到有同学在小声的讨论，时间到了，第二小组，请你们讲一讲执行过程，他结合流程图告诉我们，执行过程是依次判断输入的同学姓名符合哪个条件，如符合则输出，若都不符合则输出错误。他用图文的形式讲解，非常的直观。那现在我们就可以就着大屏幕上的流程图，总结出if-elif语句的执行过程是从if行开始依次对条件进行判断，如果正确则执行改条件下面的语句块，然后跳出if语句，如果不正确则对下一个条件进行判断，如果所有条件都不成立，则执行else下面的语句块。<br/><br>&emsp;&emsp;新知识我们已经学完了，现在请大家编写完整程序，实现上述的执行过程，学有余力的同学，请自己思考生活中有哪些需要对多个条件进行检测的事情，自主进行编写。我们请这些同学来进行展示，他们中有的从数学出发，编写了比较三个数，求最大数问题，还有的是从生活出发，编写了出租车计费的问题。大家编写的语句和格式都很规范。<br/><br>&emsp;&emsp;这堂课已经接近尾声了，这节课你都有哪些收获呢？大家说学会了if-elif的格式和执行过程，看来这节课的知识同学们都掌握了。其实编程离咱们的生活和学习很近，并且也没有想象中的那么难，老师希望同学们以后都可以像今天一样在课堂上积极思考，表达想法。<br>&emsp;&emsp;最后布置一个小作业，请同学们对比三种if语句特点，整理成表格。<br>&emsp;&emsp;这节课就上到这里，同学们再见。</p>]]></content>
      
      
      <categories>
          
          <category> 教资 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ReactNative新架构</title>
      <link href="/2025/08/19/ReactNative%E6%96%B0%E6%9E%B6%E6%9E%84/"/>
      <url>/2025/08/19/ReactNative%E6%96%B0%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<ul><li>Fabric：同步渲染 UI，消除 Bridge 通信瓶颈</li><li>TurboModules：按需加载原生模块，提升启动速度</li><li>JSI（JavaScript Interface）：直接调用原生代码，替代异步 Bridge, Bridge是异步的、单线程的，会带来额外的开销；而JSI是同步的，更低开销、并发的。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-Next-更改字体、代码可复制</title>
      <link href="/2025/08/18/Hexo-Next-%E6%9B%B4%E6%94%B9%E5%AD%97%E4%BD%93/"/>
      <url>/2025/08/18/Hexo-Next-%E6%9B%B4%E6%94%B9%E5%AD%97%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<p>Next版本为7.8.0，找到 &#x2F;themes&#x2F;next&#x2F;_config.yml 文件，搜索 font 关键词，这里注意一定要将 font 里面的 enable 设置为true, 因为默认为false，然后设置 family 为自己想要的，如果family在其他平台找的，就需要修改host。(只是修改了family， 没修改enable就会不生效，所以一定一定要记得)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Uri</span> <span class="keyword">of</span> fonts host, e.<span class="property">g</span>. <span class="attr">https</span>:<span class="comment">//fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host</span>: </span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Font</span> <span class="attr">options</span>:</span><br><span class="line">  # <span class="string">`external: true`</span> will load <span class="variable language_">this</span> font family <span class="keyword">from</span> <span class="string">`host`</span> above.</span><br><span class="line">  # <span class="string">`family: Times New Roman`</span>. <span class="title class_">Without</span> any quotes.</span><br><span class="line">  # <span class="string">`size: x.x`</span>. <span class="title class_">Use</span> <span class="string">`em`</span> <span class="keyword">as</span> unit. <span class="title class_">Default</span>: <span class="number">1</span> (16px)</span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Global</span> font settings used <span class="keyword">for</span> all elements inside &lt;body&gt;.</span><br><span class="line">  <span class="attr">global</span>:</span><br><span class="line">    <span class="attr">external</span>: <span class="literal">true</span></span><br><span class="line">    <span class="attr">family</span>: <span class="title class_">Noto</span> <span class="title class_">Serif</span> <span class="variable constant_">SC</span></span><br><span class="line">    <span class="attr">size</span>:</span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Font</span> settings <span class="keyword">for</span> site <span class="title function_">title</span> (.<span class="property">site</span>-title).</span><br><span class="line">  <span class="attr">title</span>:</span><br><span class="line">    <span class="attr">external</span>: <span class="literal">true</span></span><br><span class="line">    <span class="attr">family</span>: <span class="title class_">Noto</span> <span class="title class_">Serif</span> <span class="variable constant_">SC</span></span><br><span class="line">    <span class="attr">size</span>:</span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Font</span> settings <span class="keyword">for</span> <span class="title function_">headlines</span> (&lt;h1&gt; to &lt;h6&gt;).</span><br><span class="line">  <span class="attr">headings</span>:</span><br><span class="line">    <span class="attr">external</span>: <span class="literal">true</span></span><br><span class="line">    <span class="attr">family</span>: <span class="title class_">Noto</span> <span class="title class_">Serif</span> <span class="variable constant_">SC</span></span><br><span class="line">    <span class="attr">size</span>:</span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Font</span> settings <span class="keyword">for</span> <span class="title function_">posts</span> (.<span class="property">post</span>-body).</span><br><span class="line">  <span class="attr">posts</span>:</span><br><span class="line">    <span class="attr">external</span>: <span class="literal">true</span></span><br><span class="line">    <span class="attr">family</span>:  <span class="title class_">Noto</span> <span class="title class_">Serif</span> <span class="variable constant_">SC</span></span><br><span class="line"></span><br><span class="line">  # <span class="title class_">Font</span> settings <span class="keyword">for</span> &lt;code&gt; and code blocks.</span><br><span class="line">  <span class="attr">codes</span>:</span><br><span class="line">    <span class="attr">external</span>: <span class="literal">true</span></span><br><span class="line">    <span class="attr">family</span>: <span class="title class_">Source</span> <span class="title class_">Code</span> <span class="title class_">Pro</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>代码可复制，还是上面同一个文件，找到以下代码段，将copy_button的enable设置为true，启用就可以啦。show_result设置true后，复制完会显示一个勾。style对应的copy_button不同的样式，看个人喜好来～</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">codeblock</span>:</span><br><span class="line">  # <span class="title class_">Code</span> <span class="title class_">Highlight</span> theme</span><br><span class="line">  # <span class="title class_">Available</span> <span class="attr">values</span>: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span><br><span class="line">  # <span class="title class_">See</span>: <span class="attr">https</span>:<span class="comment">//github.com/chriskempson/tomorrow-theme</span></span><br><span class="line">  <span class="attr">highlight_theme</span>: night eighties</span><br><span class="line">  # <span class="title class_">Add</span> copy button on codeblock</span><br><span class="line">  <span class="attr">copy_button</span>:</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">    # <span class="title class_">Show</span> text copy result.</span><br><span class="line">    <span class="attr">show_result</span>: <span class="literal">true</span></span><br><span class="line">    # <span class="title class_">Available</span> <span class="attr">values</span>: <span class="keyword">default</span> | flat | mac</span><br><span class="line">    <span class="attr">style</span>: mac</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>脱离框架开发</title>
      <link href="/2025/08/13/%E5%A6%82%E4%BD%95%E8%84%B1%E7%A6%BB%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/"/>
      <url>/2025/08/13/%E5%A6%82%E4%BD%95%E8%84%B1%E7%A6%BB%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p>前端脱离框架去开发，就是不使用任何前端框架（Vue、React等）的情况下，直接用js、html和css去开发web。这意味更能深入了解前端底层原理和机制，避免依赖框架。</p><p>在面对静态且不做过多功能的低项目下，其实脱离框架就已经足够了。框架编写的代码必须要进行编译才能在浏览器中渲染，所以便有了webpack。像Vue的出现就是为了解决一些痛点问题，比如双向数据流、自动响应式更新等，但我们又不得不遵守他们框架内的一些语法，随着vue的升级，我们也要不停学习更新的框架内容。框架本身是有利于开发的，但面对一些简单的问题时，不用框架反而是明智的。根据需求而决定去不去用框架进行下一步的开发。</p><p>当开发多个类似的网站，没有打包过的代码放上服务器，能直接在服务器改源代码。而使用框架后打包的源码放在服务器中，要修改却只能本地修改，反而更浪费时间。当熟悉纯js开发后，还能开发一些工具以及框架出来。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue中插入脚本</title>
      <link href="/2025/08/12/vue%E5%AE%9E%E7%8E%B0%E6%8F%92%E5%85%A5%E8%84%9A%E6%9C%AC/"/>
      <url>/2025/08/12/vue%E5%AE%9E%E7%8E%B0%E6%8F%92%E5%85%A5%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<p>当你拿到的广告代码是包含script标签时，则需要通过一定的转换，才能正常渲染到页面上。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当你拿到的广告代码如下：</span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"> atOptions = &#123;</span><br><span class="line">  <span class="string">&#x27;key&#x27;</span> : <span class="string">&#x27;1523b7ddb936e560aadef64a851d500c&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;format&#x27;</span> : <span class="string">&#x27;iframe&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;height&#x27;</span> : <span class="number">250</span>,</span><br><span class="line">  <span class="string">&#x27;width&#x27;</span> : <span class="number">300</span>,</span><br><span class="line">  <span class="string">&#x27;params&#x27;</span> : &#123;&#125;</span><br><span class="line"> &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//www.highperformanceformat.com/1523b7ddb936e560aadef64a851d500c/invoke.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//转换后：</span></span><br><span class="line"><span class="keyword">const</span> targetDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;de_v&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!targetDiv) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建第一个 script 设置 atOptions</span></span><br><span class="line"><span class="keyword">const</span> script1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">script1.<span class="property">type</span> = <span class="string">&quot;text/javascript&quot;</span>;</span><br><span class="line">script1.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">  atOptions = &#123;</span></span><br><span class="line"><span class="string">&#x27;key&#x27; : &#x27;1523b7ddb936e560aadef64a851d500c&#x27;,</span></span><br><span class="line"><span class="string">&#x27;format&#x27; : &#x27;iframe&#x27;,</span></span><br><span class="line"><span class="string">&#x27;height&#x27; : 250,</span></span><br><span class="line"><span class="string">&#x27;width&#x27; : 300,</span></span><br><span class="line"><span class="string">&#x27;params&#x27; : &#123;&#125;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建第二个 script 负责加载外部 JS</span></span><br><span class="line"><span class="keyword">const</span> script2 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">script2.<span class="property">type</span> = <span class="string">&quot;text/javascript&quot;</span>;</span><br><span class="line">script2.<span class="property">src</span> = <span class="string">&quot;//www.highperformanceformat.com/1523b7ddb936e560aadef64a851d500c/invoke.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入到 #de_v 容器内</span></span><br><span class="line">targetDiv.<span class="title function_">appendChild</span>(script1);</span><br><span class="line">targetDiv.<span class="title function_">appendChild</span>(script2);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>获取到的csv保存数据库</title>
      <link href="/2025/07/29/%E8%8E%B7%E5%8F%96%E5%88%B0%E7%9A%84csv%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2025/07/29/%E8%8E%B7%E5%8F%96%E5%88%B0%E7%9A%84csv%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>如果第三方接口获取到的数据，返回为csv文档时，可以先把csv文档保存到本地某路径，再通过fs的createReadStream读取数据，保存到本地数据库。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">processConversations</span> = <span class="keyword">async</span> (<span class="params">dateObj</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> username = <span class="string">&#x27;你的帐户名&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> password = <span class="string">&#x27;密码&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> year = dateObj.<span class="title function_">format</span>(<span class="string">&#x27;YYYY&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> month = dateObj.<span class="title function_">format</span>(<span class="string">&#x27;MM&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> day = dateObj.<span class="title function_">format</span>(<span class="string">&#x27;DD&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> hour = dateObj.<span class="title function_">format</span>(<span class="string">&#x27;HH&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> dateStr = <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;day&#125;</span>-<span class="subst">$&#123;hour&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> fileName = <span class="string">`路径后半部份`</span>;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`https://api/<span class="subst">$&#123;fileName&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> outputPath = <span class="string">`/tmp/conversations`</span>;</span><br><span class="line">  <span class="keyword">const</span> tableName = <span class="string">&#x27;test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 下载 CSV</span></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(url, &#123;</span><br><span class="line">      <span class="attr">responseType</span>: <span class="string">&#x27;stream&#x27;</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="title class_">Authorization</span>: <span class="string">`Basic <span class="subst">$&#123;Buffer.<span class="keyword">from</span>(<span class="string">`<span class="subst">$&#123;username&#125;</span>:<span class="subst">$&#123;password&#125;</span>`</span>).toString(<span class="string">&#x27;base64&#x27;</span>)&#125;</span>`</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> writer = fs.<span class="title function_">createWriteStream</span>(outputPath);</span><br><span class="line">    response.<span class="property">data</span>.<span class="title function_">pipe</span>(writer);</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      writer.<span class="title function_">on</span>(<span class="string">&#x27;finish&#x27;</span>, resolve);</span><br><span class="line">      writer.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, reject);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27; CSV 文件下载成功:&#x27;</span>, fileName);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> rows = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      fs.<span class="title function_">createReadStream</span>(outputPath)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">csv</span>())</span><br><span class="line">        .<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">row</span>) =&gt;</span> &#123;</span><br><span class="line">          rows.<span class="title function_">push</span>([</span><br><span class="line">            row[<span class="string">&#x27;DATE_TIME&#x27;</span>] ? <span class="title function_">dayjs</span>(row[<span class="string">&#x27;DATE_TIME&#x27;</span>]).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) : <span class="literal">null</span>,</span><br><span class="line">            row[<span class="string">&#x27;CLID&#x27;</span>] || <span class="literal">null</span>,</span><br><span class="line">            row[<span class="string">&#x27;CLID_SOURCE&#x27;</span>] || <span class="literal">null</span></span><br><span class="line">          ]);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, resolve)</span><br><span class="line">        .<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, reject);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rows.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`CSV 中没有数据: <span class="subst">$&#123;fileName&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> insertSQL = <span class="string">`</span></span><br><span class="line"><span class="string">      INSERT INTO \`<span class="subst">$&#123;tableName&#125;</span>\` (</span></span><br><span class="line"><span class="string">        date_time, clid, clid_source</span></span><br><span class="line"><span class="string">      ) VALUES ?</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">query</span>(insertSQL, [rows]);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`成功插入 <span class="subst">$&#123;rows.length&#125;</span> 条记录: <span class="subst">$&#123;fileName&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`报错 (<span class="subst">$&#123;fileName&#125;</span>):`</span>, error.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>索引</title>
      <link href="/2025/07/27/%E7%B4%A2%E5%BC%95/"/>
      <url>/2025/07/27/%E7%B4%A2%E5%BC%95/</url>
      
        <content type="html"><![CDATA[<h2 id="索引的作用"><a href="#索引的作用" class="headerlink" title="索引的作用"></a>索引的作用</h2><p>当想要快速查找到自己想要的数据时，可以用索引。通过索引，可以在检索数据时直接定位到，省去时间，就好比一本书前面的目录，能让你快速找到自己想看的内容。如果索引包含多列，那么按照从左到右的顺序，即最左前缀列来进行。</p><h2 id="索引的类型"><a href="#索引的类型" class="headerlink" title="索引的类型"></a>索引的类型</h2><ol><li>唯一索引：<br>对某些列（比如身份证）添加唯一索引，不能出现两条身份证相同的记录，通过 UNIQUE 关键字我们就添加了一个唯一索引。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ADD</span> <span class="variable constant_">UNIQUE</span> <span class="variable constant_">INDEX</span> <span class="title function_">uni_sf</span> (sf);</span><br></pre></td></tr></table></figure><p>也可以给列添加唯一约束，而不创建唯一索引，列具有唯一性。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ADD</span> <span class="variable constant_">CONSTRAINT</span> uni_name <span class="title function_">UNIQUE</span> (name);</span><br></pre></td></tr></table></figure><ol start="2"><li>主键索引：<br> 主键一旦创建，就会自动带上索引。这也是为什么主键搜索数据会更快的原因。一个表只能有一个主键，一个主键可以包含多列，即联合主键。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ALTER</span> <span class="variable constant_">TABLE</span> table_name <span class="variable constant_">ADD</span> <span class="variable constant_">PRIMARY</span> <span class="title function_">KEY</span> (column);</span><br></pre></td></tr></table></figure><ol start="3"><li>普通索引：<br> 任何一列都可以创建索引，建议只在自己经常想要检索的列上加索引，不要全部加，会耗性能。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ALTER</span> <span class="variable constant_">TABLE</span> table_name <span class="variable constant_">ADD</span> <span class="variable constant_">INDEX</span> <span class="title function_">index_name</span> (column);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ReactNative自定义滑动条</title>
      <link href="/2025/07/22/ReactNative%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%91%E5%8A%A8%E6%9D%A1/"/>
      <url>/2025/07/22/ReactNative%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%91%E5%8A%A8%E6%9D%A1/</url>
      
        <content type="html"><![CDATA[<p>测试、UI要求的会比较高，比如滑动图标改成自定义图片等，所以传统的@react-native-community&#x2F;slider已经不能满足所需，所以采取自定义形式，在网上找了很久才发现的一个宝藏依赖：<a href="https://github.com/miblanchard/react-native-slider">https://github.com/miblanchard/react-native-slider</a></p><h2 id="组件代码如下："><a href="#组件代码如下：" class="headerlink" title="组件代码如下："></a>组件代码如下：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">Animated</span>,</span><br><span class="line">    <span class="title class_">Easing</span>,</span><br><span class="line">    I18nManager,</span><br><span class="line">    <span class="title class_">Image</span>,</span><br><span class="line">    <span class="title class_">ImageSourcePropType</span>,</span><br><span class="line">    <span class="title class_">LayoutChangeEvent</span>,</span><br><span class="line">    <span class="title class_">PanResponder</span>,</span><br><span class="line">    <span class="title class_">PanResponderInstance</span>,</span><br><span class="line">    <span class="title class_">View</span>,</span><br><span class="line">    <span class="title class_">ViewStyle</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="comment">// styles</span></span><br><span class="line"><span class="keyword">import</span> &#123; defaultStyles <span class="keyword">as</span> styles &#125; <span class="keyword">from</span> <span class="string">&#x27;./styles&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">Dimensions</span>, <span class="title class_">SliderProps</span>, <span class="title class_">SliderState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span>;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">RectReturn</span> = &#123;</span><br><span class="line">    <span class="attr">containsPoint</span>: <span class="function">(<span class="params">nativeX: number, nativeY: number</span>) =&gt;</span> boolean;</span><br><span class="line">    <span class="attr">height</span>: number;</span><br><span class="line">    <span class="attr">trackDistanceToPoint</span>: <span class="function">(<span class="params">nativeX: number</span>) =&gt;</span> number;</span><br><span class="line">    <span class="attr">width</span>: number;</span><br><span class="line">    <span class="attr">x</span>: number;</span><br><span class="line">    <span class="attr">y</span>: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Rect</span> = (<span class="params">&#123;</span></span><br><span class="line"><span class="params">    height,</span></span><br><span class="line"><span class="params">    width,</span></span><br><span class="line"><span class="params">    x,</span></span><br><span class="line"><span class="params">    y,</span></span><br><span class="line"><span class="params">&#125;: &#123;</span></span><br><span class="line"><span class="params">    height: number;</span></span><br><span class="line"><span class="params">    width: number;</span></span><br><span class="line"><span class="params">    x: number;</span></span><br><span class="line"><span class="params">    y: number;</span></span><br><span class="line"><span class="params">&#125;</span>) =&gt; (&#123;</span><br><span class="line">    <span class="attr">containsPoint</span>: <span class="function">(<span class="params">nativeX: number, nativeY: number</span>) =&gt;</span></span><br><span class="line">        nativeX &gt;= x &amp;&amp;</span><br><span class="line">        nativeY &gt;= y &amp;&amp;</span><br><span class="line">        nativeX &lt;= x + width &amp;&amp;</span><br><span class="line">        nativeY &lt;= y + height,</span><br><span class="line">    height,</span><br><span class="line">    <span class="attr">trackDistanceToPoint</span>: <span class="function">(<span class="params">nativeX: number</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (nativeX &lt; x) &#123;</span><br><span class="line">            <span class="keyword">return</span> x - nativeX;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nativeX &gt; x + width) &#123;</span><br><span class="line">            <span class="keyword">return</span> nativeX - (x + width);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    width,</span><br><span class="line">    x,</span><br><span class="line">    y,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">DEFAULT_ANIMATION_CONFIGS</span> = &#123;</span><br><span class="line">    <span class="attr">spring</span>: &#123;</span><br><span class="line">        <span class="attr">friction</span>: <span class="number">7</span>,</span><br><span class="line">        <span class="attr">tension</span>: <span class="number">100</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">timing</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">150</span>,</span><br><span class="line">        <span class="attr">easing</span>: <span class="title class_">Easing</span>.<span class="title function_">inOut</span>(<span class="title class_">Easing</span>.<span class="property">ease</span>),</span><br><span class="line">        <span class="attr">delay</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> normalizeValue = (</span><br><span class="line">    <span class="attr">props</span>: <span class="title class_">SliderProps</span>,</span><br><span class="line">    value?: number | <span class="title class_">Array</span>&lt;number&gt;,</span><br><span class="line">): <span class="title class_">Array</span>&lt;number&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!value || (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value) &amp;&amp; value.<span class="property">length</span> === <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123;maximumValue, minimumValue&#125; = props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getBetweenValue</span> = (<span class="params">inputValue: number</span>) =&gt;</span><br><span class="line">        <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(inputValue, maximumValue), minimumValue);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)) &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="title function_">getBetweenValue</span>(value)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value.<span class="title function_">map</span>(getBetweenValue).<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> updateValues = (&#123;</span><br><span class="line">    values,</span><br><span class="line">    newValues = values,</span><br><span class="line">&#125;: &#123;</span><br><span class="line">    <span class="attr">values</span>: number | <span class="title class_">Array</span>&lt;number&gt; | <span class="title class_">Animated</span>.<span class="property">Value</span> | <span class="title class_">Array</span>&lt;<span class="title class_">Animated</span>.<span class="property">Value</span>&gt;;</span><br><span class="line">    newValues?: number | <span class="title class_">Array</span>&lt;number&gt; | <span class="title class_">Animated</span>.<span class="property">Value</span> | <span class="title class_">Array</span>&lt;<span class="title class_">Animated</span>.<span class="property">Value</span>&gt;;</span><br><span class="line">&#125;): <span class="title class_">Animated</span>.<span class="property">Value</span>[] =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        <span class="title class_">Array</span>.<span class="title function_">isArray</span>(newValues) &amp;&amp;</span><br><span class="line">        <span class="title class_">Array</span>.<span class="title function_">isArray</span>(values) &amp;&amp;</span><br><span class="line">        newValues.<span class="property">length</span> !== values.<span class="property">length</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">updateValues</span>(&#123;<span class="attr">values</span>: newValues&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(values) &amp;&amp; <span class="title class_">Array</span>.<span class="title function_">isArray</span>(newValues)) &#123;</span><br><span class="line">        <span class="keyword">return</span> values?.<span class="title function_">map</span>(<span class="function">(<span class="params">value: number | Animated.Value, index: number</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> valueToSet = newValues[index];</span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Animated</span>.<span class="property">Value</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (valueToSet <span class="keyword">instanceof</span> <span class="title class_">Animated</span>.<span class="property">Value</span>) &#123;</span><br><span class="line">                    valueToSet = valueToSet.<span class="title function_">__getValue</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                value.<span class="title function_">setValue</span>(valueToSet);</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (valueToSet <span class="keyword">instanceof</span> <span class="title class_">Animated</span>.<span class="property">Value</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> valueToSet;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Animated</span>.<span class="title class_">Value</span>(valueToSet);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">new</span> <span class="title class_">Animated</span>.<span class="title class_">Value</span>(<span class="number">0</span>)];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> indexOfLowest = (<span class="attr">values</span>: <span class="title class_">Array</span>&lt;number&gt;): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> lowestIndex = <span class="number">0</span>;</span><br><span class="line">    values.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value &lt; array[lowestIndex]) &#123;</span><br><span class="line">            lowestIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> lowestIndex;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Slider</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&lt;<span class="title class_">SliderProps</span>, <span class="title class_">SliderState</span>&gt; &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props: SliderProps</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_panResponder</span> = <span class="title class_">PanResponder</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">            <span class="attr">onStartShouldSetPanResponder</span>:</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">_handleStartShouldSetPanResponder</span>,</span><br><span class="line">            <span class="attr">onMoveShouldSetPanResponder</span>: <span class="variable language_">this</span>.<span class="property">_handleMoveShouldSetPanResponder</span>,</span><br><span class="line">            <span class="attr">onPanResponderGrant</span>: <span class="variable language_">this</span>.<span class="property">_handlePanResponderGrant</span>,</span><br><span class="line">            <span class="attr">onPanResponderMove</span>: <span class="variable language_">this</span>.<span class="property">_handlePanResponderMove</span>,</span><br><span class="line">            <span class="attr">onPanResponderRelease</span>: <span class="variable language_">this</span>.<span class="property">_handlePanResponderEnd</span>,</span><br><span class="line">            <span class="attr">onPanResponderTerminationRequest</span>:</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">_handlePanResponderRequestEnd</span>,</span><br><span class="line">            <span class="attr">onPanResponderTerminate</span>: <span class="variable language_">this</span>.<span class="property">_handlePanResponderEnd</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">allMeasured</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">containerSize</span>: &#123;</span><br><span class="line">                <span class="attr">width</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">height</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">thumbSize</span>: &#123;</span><br><span class="line">                <span class="attr">width</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">height</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">trackMarksValues</span>: <span class="title function_">updateValues</span>(&#123;</span><br><span class="line">                <span class="attr">values</span>: <span class="title function_">normalizeValue</span>(<span class="variable language_">this</span>.<span class="property">props</span>, <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">trackMarks</span>),</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="attr">values</span>: <span class="title function_">updateValues</span>(&#123;</span><br><span class="line">                <span class="attr">values</span>: <span class="title function_">normalizeValue</span>(</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">props</span>,</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">value</span> <span class="keyword">instanceof</span> <span class="title class_">Animated</span>.<span class="property">Value</span></span><br><span class="line">                        ? <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">value</span>.<span class="title function_">__getValue</span>()</span><br><span class="line">                        : <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">value</span>,</span><br><span class="line">                ),</span><br><span class="line">            &#125;),</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">        <span class="attr">animationType</span>: <span class="string">&#x27;timing&#x27;</span>,</span><br><span class="line">        <span class="attr">debugTouchArea</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">trackMarks</span>: [],</span><br><span class="line">        <span class="attr">maximumTrackTintColor</span>: <span class="string">&#x27;#b3b3b3&#x27;</span>,</span><br><span class="line">        <span class="attr">maximumValue</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">minimumTrackTintColor</span>: <span class="string">&#x27;#3f3f3f&#x27;</span>,</span><br><span class="line">        <span class="attr">minimumValue</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">step</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">thumbTintColor</span>: <span class="string">&#x27;#343434&#x27;</span>,</span><br><span class="line">        <span class="attr">trackClickable</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">value</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">vertical</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(<span class="params">props: SliderProps, state: SliderState</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            props.<span class="property">trackMarks</span> &amp;&amp;</span><br><span class="line">            !!state.<span class="property">trackMarksValues</span> &amp;&amp;</span><br><span class="line">            state.<span class="property">trackMarksValues</span>.<span class="property">length</span> &gt; <span class="number">0</span></span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="keyword">const</span> newTrackMarkValues = <span class="title function_">normalizeValue</span>(props, props.<span class="property">trackMarks</span>);</span><br><span class="line">            <span class="keyword">const</span> statePatch = &#123;&#125; <span class="keyword">as</span> <span class="title class_">SliderState</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (</span><br><span class="line">                state.<span class="property">trackMarksValues</span></span><br><span class="line">            ) &#123;</span><br><span class="line">                statePatch.<span class="property">trackMarksValues</span> = <span class="title function_">updateValues</span>(&#123;</span><br><span class="line">                    <span class="attr">values</span>: state.<span class="property">trackMarksValues</span>,</span><br><span class="line">                    <span class="attr">newValues</span>: newTrackMarkValues,</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> statePatch;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> newValues = <span class="title function_">normalizeValue</span>(</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">props</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">value</span> <span class="keyword">instanceof</span> <span class="title class_">Animated</span>.<span class="property">Value</span></span><br><span class="line">                ? <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">value</span>.<span class="title function_">__getValue</span>()</span><br><span class="line">                : <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">value</span>,</span><br><span class="line">        );</span><br><span class="line">        newValues.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, i</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>[i]) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">_setCurrentValue</span>(value, i);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>[i].<span class="title function_">__getValue</span>()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">animateTransitions</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">_setCurrentValueAnimated</span>(value, i);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">_setCurrentValue</span>(value, i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">_getRawValues</span>(<span class="params"></span></span><br><span class="line"><span class="params">        values: <span class="built_in">Array</span>&lt;Animated.Value&gt; | <span class="built_in">Array</span>&lt;Animated.AnimatedInterpolation&gt;,</span></span><br><span class="line"><span class="params">    </span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> values.<span class="title function_">map</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> value.<span class="title function_">__getValue</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _handleStartShouldSetPanResponder = (</span><br><span class="line">        <span class="attr">e</span>: any,</span><br><span class="line">    ): <span class="comment">/* gestureState: GestureState */</span></span><br><span class="line">    <span class="function"><span class="params">boolean</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">_thumbHitTest</span>(e); <span class="comment">// Should we become active when the user presses down on the thumb?</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">_handleMoveShouldSetPanResponder</span>(): <span class="comment">/* e, gestureState: GestureState */</span></span><br><span class="line">    boolean &#123;</span><br><span class="line">        <span class="comment">// Should we become active when the user moves a touch over the thumb?</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _handlePanResponderGrant = <span class="function">(<span class="params">e: &#123;nativeEvent: any&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;thumbSize&#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;nativeEvent&#125; = e;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_previousLeft</span> = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">trackClickable</span></span><br><span class="line">            ? nativeEvent.<span class="property">locationX</span> - thumbSize.<span class="property">width</span></span><br><span class="line">            : <span class="variable language_">this</span>.<span class="title function_">_getThumbLeft</span>(<span class="variable language_">this</span>.<span class="title function_">_getCurrentValue</span>(<span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span>));</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>?.<span class="property">onSlidingStart</span>?.(<span class="variable language_">this</span>.<span class="title function_">_getRawValues</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _handlePanResponderMove = <span class="function">(<span class="params">_e: any, gestureState: any</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">disabled</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_setCurrentValue</span>(</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_getValue</span>(gestureState),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span>,</span><br><span class="line">            <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">props</span>?.<span class="property">onValueChange</span>?.(</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">_getRawValues</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>),</span><br><span class="line">                );</span><br><span class="line">            &#125;,</span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _handlePanResponderRequestEnd = <span class="function">() =&gt;</span></span><br><span class="line">        <span class="comment">/* e, gestureState: GestureState */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Should we allow another component to take over this pan?</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    _handlePanResponderEnd = <span class="function">(<span class="params">_e: any, gestureState: any</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">disabled</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_setCurrentValue</span>(</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_getValue</span>(gestureState),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span>,</span><br><span class="line">            <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">trackClickable</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">props</span>?.<span class="property">onValueChange</span>?.(</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="title function_">_getRawValues</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>),</span><br><span class="line">                    );</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">props</span>?.<span class="property">onSlidingComplete</span>?.(</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">_getRawValues</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>),</span><br><span class="line">                );</span><br><span class="line">            &#125;,</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _measureContainer = <span class="function">(<span class="params">e: LayoutChangeEvent</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_handleMeasure</span>(<span class="string">&#x27;_containerSize&#x27;</span>, e);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _measureTrack = <span class="function">(<span class="params">e: LayoutChangeEvent</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_handleMeasure</span>(<span class="string">&#x27;_trackSize&#x27;</span>, e);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _measureThumb = <span class="function">(<span class="params">e: LayoutChangeEvent</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_handleMeasure</span>(<span class="string">&#x27;_thumbSize&#x27;</span>, e);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _handleMeasure = <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        name: <span class="string">&#x27;_containerSize&#x27;</span> | <span class="string">&#x27;_trackSize&#x27;</span> | <span class="string">&#x27;_thumbSize&#x27;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        e: LayoutChangeEvent,</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;width, height&#125; = e.<span class="property">nativeEvent</span>.<span class="property">layout</span>;</span><br><span class="line">        <span class="keyword">const</span> size = &#123;</span><br><span class="line">            width,</span><br><span class="line">            height,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> currentSize = <span class="variable language_">this</span>[name];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            currentSize &amp;&amp;</span><br><span class="line">            width === currentSize.<span class="property">width</span> &amp;&amp;</span><br><span class="line">            height === currentSize.<span class="property">height</span></span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>[name] = size;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_containerSize</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">_thumbSize</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">containerSize</span>: <span class="variable language_">this</span>.<span class="property">_containerSize</span>,</span><br><span class="line">                <span class="attr">thumbSize</span>: <span class="variable language_">this</span>.<span class="property">_thumbSize</span>,</span><br><span class="line">                <span class="attr">allMeasured</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    _getRatio = <span class="function">(<span class="params">value: number</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;maximumValue, minimumValue&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">return</span> (value - minimumValue) / (maximumValue - minimumValue);</span><br><span class="line">    &#125;;</span><br><span class="line">    _getThumbLeft = <span class="function">(<span class="params">value: number</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;containerSize, thumbSize&#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;vertical&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> standardRatio = <span class="variable language_">this</span>.<span class="title function_">_getRatio</span>(value);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> ratio = I18nManager.<span class="property">isRTL</span> ? <span class="number">1</span> - standardRatio : standardRatio;</span><br><span class="line">        <span class="keyword">return</span> ratio * ((vertical ? containerSize.<span class="property">height</span> : containerSize.<span class="property">width</span>) - thumbSize.<span class="property">width</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    _getValue = <span class="function">(<span class="params">gestureState: &#123;dx: number, dy: number&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;containerSize, thumbSize, values&#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;maximumValue, minimumValue, step, vertical&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> length = containerSize.<span class="property">width</span> - thumbSize.<span class="property">width</span>;</span><br><span class="line">        <span class="keyword">const</span> thumbLeft = vertical ? <span class="variable language_">this</span>.<span class="property">_previousLeft</span> + (gestureState.<span class="property">dy</span> * -<span class="number">1</span>) : <span class="variable language_">this</span>.<span class="property">_previousLeft</span> + gestureState.<span class="property">dx</span>;</span><br><span class="line">        <span class="keyword">const</span> nonRtlRatio = thumbLeft / length;</span><br><span class="line">        <span class="keyword">const</span> ratio = I18nManager.<span class="property">isRTL</span> ? <span class="number">1</span> - nonRtlRatio : nonRtlRatio;</span><br><span class="line">        <span class="keyword">let</span> minValue = minimumValue;</span><br><span class="line">        <span class="keyword">let</span> maxValue = maximumValue;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> rawValues = <span class="variable language_">this</span>.<span class="title function_">_getRawValues</span>(values);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> buffer = step ? step : <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (values.<span class="property">length</span> === <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span> === <span class="number">1</span>) &#123;</span><br><span class="line">                minValue = rawValues[<span class="number">0</span>] + buffer;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                maxValue = rawValues[<span class="number">1</span>] - buffer;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (step) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(</span><br><span class="line">                minValue,</span><br><span class="line">                <span class="title class_">Math</span>.<span class="title function_">min</span>(</span><br><span class="line">                    maxValue,</span><br><span class="line">                    minimumValue +</span><br><span class="line">                        <span class="title class_">Math</span>.<span class="title function_">round</span>(</span><br><span class="line">                            (ratio * (maximumValue - minimumValue)) / step,</span><br><span class="line">                        ) *</span><br><span class="line">                            step,</span><br><span class="line">                ),</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(</span><br><span class="line">            minValue,</span><br><span class="line">            <span class="title class_">Math</span>.<span class="title function_">min</span>(</span><br><span class="line">                maxValue,</span><br><span class="line">                ratio * (maximumValue - minimumValue) + minimumValue,</span><br><span class="line">            ),</span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line">    _getCurrentValue = <span class="function">(<span class="params">thumbIndex: number = <span class="number">0</span></span>) =&gt;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>[thumbIndex].<span class="title function_">__getValue</span>();</span><br><span class="line"></span><br><span class="line">    _setCurrentValue = <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        value: number,</span></span></span><br><span class="line"><span class="params"><span class="function">        thumbIndex: number | <span class="literal">null</span> | <span class="literal">undefined</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        callback?: () =&gt; <span class="keyword">void</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> safeIndex = thumbIndex ?? <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">const</span> animatedValue = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>[safeIndex];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (animatedValue) &#123;</span><br><span class="line">            animatedValue.<span class="title function_">setValue</span>(value);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                <span class="title function_">callback</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prevState: SliderState</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> newValues = [...prevState.<span class="property">values</span>];</span><br><span class="line">                newValues[safeIndex] = <span class="keyword">new</span> <span class="title class_">Animated</span>.<span class="title class_">Value</span>(value);</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">values</span>: newValues,</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;, callback);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _setCurrentValueAnimated = <span class="function">(<span class="params">value: number, thumbIndex: number = <span class="number">0</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;animationType&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> animationConfig = &#123;</span><br><span class="line">            ...<span class="variable constant_">DEFAULT_ANIMATION_CONFIGS</span>[animationType],</span><br><span class="line">            ...<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">animationConfig</span>,</span><br><span class="line">            <span class="attr">toValue</span>: value,</span><br><span class="line">            <span class="attr">useNativeDriver</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="title class_">Animated</span>[animationType](</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">values</span>[thumbIndex],</span><br><span class="line">            animationConfig,</span><br><span class="line">        ).<span class="title function_">start</span>();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _getTouchOverflowSize = (): &#123;</span><br><span class="line">        <span class="attr">width</span>: number;</span><br><span class="line">        <span class="attr">height</span>: number;</span><br><span class="line">    &#125; =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;allMeasured, containerSize, thumbSize&#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;thumbTouchSize&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> size = &#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">40</span>,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (allMeasured) &#123;</span><br><span class="line">            size.<span class="property">width</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                thumbTouchSize?.<span class="property">width</span> || <span class="number">0</span> - thumbSize.<span class="property">width</span>,</span><br><span class="line">            );</span><br><span class="line">            size.<span class="property">height</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                thumbTouchSize?.<span class="property">height</span> || <span class="number">0</span> - containerSize.<span class="property">height</span>,</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _getTouchOverflowStyle = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;width, height&#125; = <span class="variable language_">this</span>.<span class="title function_">_getTouchOverflowSize</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> touchOverflowStyle = &#123;&#125; <span class="keyword">as</span> <span class="title class_">ViewStyle</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (width !== <span class="literal">undefined</span> &amp;&amp; height !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> verticalMargin = -height / <span class="number">2</span>;</span><br><span class="line">            touchOverflowStyle.<span class="property">marginTop</span> = verticalMargin;</span><br><span class="line">            touchOverflowStyle.<span class="property">marginBottom</span> = verticalMargin;</span><br><span class="line">            <span class="keyword">const</span> horizontalMargin = -width / <span class="number">2</span>;</span><br><span class="line">            touchOverflowStyle.<span class="property">marginLeft</span> = horizontalMargin;</span><br><span class="line">            touchOverflowStyle.<span class="property">marginRight</span> = horizontalMargin;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">debugTouchArea</span> === <span class="literal">true</span>) &#123;</span><br><span class="line">            touchOverflowStyle.<span class="property">backgroundColor</span> = <span class="string">&#x27;orange&#x27;</span>;</span><br><span class="line">            touchOverflowStyle.<span class="property">opacity</span> = <span class="number">0.5</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> touchOverflowStyle;</span><br><span class="line">    &#125;;</span><br><span class="line">    _thumbHitTest = <span class="function">(<span class="params">e: &#123;nativeEvent: any&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;nativeEvent&#125; = e;</span><br><span class="line">        <span class="keyword">const</span> &#123;trackClickable&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;values&#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> hitThumb = values.<span class="title function_">find</span>(<span class="function">(<span class="params">_, i</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> thumbTouchRect = <span class="variable language_">this</span>.<span class="title function_">_getThumbTouchRect</span>(i);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> containsPoint = thumbTouchRect.<span class="title function_">containsPoint</span>(</span><br><span class="line">                nativeEvent.<span class="property">locationX</span>,</span><br><span class="line">                nativeEvent.<span class="property">locationY</span>,</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (containsPoint) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span> = i;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> containsPoint;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (hitThumb) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (trackClickable) &#123;</span><br><span class="line">            <span class="comment">// set the active thumb index</span></span><br><span class="line">            <span class="keyword">if</span> (values.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span> = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// we will find the closest thumb and that will be the active thumb</span></span><br><span class="line">                <span class="keyword">const</span> thumbDistances = values.<span class="title function_">map</span>(<span class="function">(<span class="params">_value, index</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> thumbTouchRect = <span class="variable language_">this</span>.<span class="title function_">_getThumbTouchRect</span>(index);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> thumbTouchRect.<span class="title function_">trackDistanceToPoint</span>(</span><br><span class="line">                        nativeEvent.<span class="property">locationX</span>,</span><br><span class="line">                    );</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">_activeThumbIndex</span> = <span class="title function_">indexOfLowest</span>(thumbDistances);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _getThumbTouchRect = (<span class="attr">thumbIndex</span>: number = <span class="number">0</span>): <span class="function"><span class="params">RectReturn</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;containerSize, thumbSize&#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;thumbTouchSize&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;height, width&#125; = thumbTouchSize || &#123;<span class="attr">height</span>: <span class="number">40</span>, <span class="attr">width</span>: <span class="number">40</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> touchOverflowSize = <span class="variable language_">this</span>.<span class="title function_">_getTouchOverflowSize</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Rect</span>(&#123;</span><br><span class="line">            height,</span><br><span class="line">            width,</span><br><span class="line">            <span class="attr">x</span>:</span><br><span class="line">                touchOverflowSize.<span class="property">width</span> / <span class="number">2</span> +</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">_getThumbLeft</span>(<span class="variable language_">this</span>.<span class="title function_">_getCurrentValue</span>(thumbIndex)) +</span><br><span class="line">                (thumbSize.<span class="property">width</span> - width) / <span class="number">2</span>,</span><br><span class="line">            <span class="attr">y</span>:</span><br><span class="line">                touchOverflowSize.<span class="property">height</span> / <span class="number">2</span> +</span><br><span class="line">                (containerSize.<span class="property">height</span> - height) / <span class="number">2</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="attr">_activeThumbIndex</span>: number = <span class="number">0</span>;</span><br><span class="line">    <span class="attr">_containerSize</span>: <span class="title class_">Dimensions</span> | <span class="literal">null</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">_panResponder</span>: <span class="title class_">PanResponderInstance</span>;</span><br><span class="line">    <span class="attr">_previousLeft</span>: number = <span class="number">0</span>;</span><br><span class="line">    <span class="attr">_thumbSize</span>: <span class="title class_">Dimensions</span> | <span class="literal">null</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">_trackSize</span>: <span class="title class_">Dimensions</span> | <span class="literal">null</span> | <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">    _renderDebugThumbTouchRect = <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        thumbLeft: Animated.AnimatedInterpolation,</span></span></span><br><span class="line"><span class="params"><span class="function">        index: number,</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;height, y, width&#125; = <span class="variable language_">this</span>.<span class="title function_">_getThumbTouchRect</span>() || &#123;&#125;;</span><br><span class="line">        <span class="keyword">const</span> positionStyle = &#123;</span><br><span class="line">            height,</span><br><span class="line">            <span class="attr">left</span>: thumbLeft,</span><br><span class="line">            <span class="attr">top</span>: y,</span><br><span class="line">            width,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Animated.View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">debug-thumb-</span>$&#123;<span class="attr">index</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">pointerEvents</span>=<span class="string">&quot;none&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">style</span>=<span class="string">&#123;[styles.debugThumbTouchArea,</span> <span class="attr">positionStyle</span>]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _renderThumbImage = <span class="function">(<span class="params">thumbIndex: number = <span class="number">0</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;thumbImage&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!thumbImage) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Image</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">source</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    (<span class="attr">Array.isArray</span>(<span class="attr">thumbImage</span>)</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        ? <span class="attr">thumbImage</span>[<span class="attr">thumbIndex</span>]</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">:</span> <span class="attr">thumbImage</span>) <span class="attr">as</span> <span class="attr">ImageSourcePropType</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            containerStyle,</span><br><span class="line">            debugTouchArea,</span><br><span class="line">            maximumTrackTintColor,</span><br><span class="line">            maximumValue,</span><br><span class="line">            minimumTrackTintColor,</span><br><span class="line">            minimumValue,</span><br><span class="line">            renderAboveThumbComponent,</span><br><span class="line">            renderTrackMarkComponent,</span><br><span class="line">            renderThumbComponent,</span><br><span class="line">            thumbStyle,</span><br><span class="line">            thumbTintColor,</span><br><span class="line">            trackStyle,</span><br><span class="line">            vertical,</span><br><span class="line">            ...other</span><br><span class="line">        &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            allMeasured,</span><br><span class="line">            containerSize,</span><br><span class="line">            thumbSize,</span><br><span class="line">            trackMarksValues,</span><br><span class="line">            values,</span><br><span class="line">        &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">const</span> interpolatedThumbValues = values.<span class="title function_">map</span>(<span class="function">(<span class="params">value</span>) =&gt;</span></span><br><span class="line">            value.<span class="title function_">interpolate</span>(&#123;</span><br><span class="line">                <span class="attr">inputRange</span>: [minimumValue, maximumValue],</span><br><span class="line">                <span class="attr">outputRange</span>: I18nManager.<span class="property">isRTL</span></span><br><span class="line">                    ? [<span class="number">0</span>, -(containerSize.<span class="property">width</span> - thumbSize.<span class="property">width</span>)]</span><br><span class="line">                    : [<span class="number">0</span>, containerSize.<span class="property">width</span> - thumbSize.<span class="property">width</span>],</span><br><span class="line">            &#125;),</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">const</span> interpolatedTrackValues = values.<span class="title function_">map</span>(<span class="function">(<span class="params">value</span>) =&gt;</span></span><br><span class="line">            value.<span class="title function_">interpolate</span>(&#123;</span><br><span class="line">                <span class="attr">inputRange</span>: [minimumValue, maximumValue],</span><br><span class="line">                <span class="attr">outputRange</span>: [<span class="number">0</span>, containerSize.<span class="property">width</span> - thumbSize.<span class="property">width</span>],</span><br><span class="line">            &#125;),</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">const</span> interpolatedTrackMarksValues =</span><br><span class="line">            trackMarksValues &amp;&amp;</span><br><span class="line">            trackMarksValues.<span class="title function_">map</span>(<span class="function">(<span class="params">v</span>) =&gt;</span></span><br><span class="line">                v.<span class="title function_">interpolate</span>(&#123;</span><br><span class="line">                    <span class="attr">inputRange</span>: [minimumValue, maximumValue],</span><br><span class="line">                    <span class="attr">outputRange</span>: I18nManager.<span class="property">isRTL</span></span><br><span class="line">                        ? [<span class="number">0</span>, -(containerSize.<span class="property">width</span> - thumbSize.<span class="property">width</span>)]</span><br><span class="line">                        : [<span class="number">0</span>, containerSize.<span class="property">width</span> - thumbSize.<span class="property">width</span>],</span><br><span class="line">                &#125;),</span><br><span class="line">            );</span><br><span class="line">        <span class="keyword">const</span> valueVisibleStyle = &#123;&#125; <span class="keyword">as</span> <span class="title class_">ViewStyle</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!allMeasured) &#123;</span><br><span class="line">            valueVisibleStyle.<span class="property">opacity</span> = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> interpolatedRawValues = <span class="variable language_">this</span>.<span class="title function_">_getRawValues</span>(</span><br><span class="line">            interpolatedTrackValues,</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> minThumbValue = <span class="keyword">new</span> <span class="title class_">Animated</span>.<span class="title class_">Value</span>(</span><br><span class="line">            <span class="title class_">Math</span>.<span class="title function_">min</span>(...interpolatedRawValues),</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">const</span> maxThumbValue = <span class="keyword">new</span> <span class="title class_">Animated</span>.<span class="title class_">Value</span>(</span><br><span class="line">            <span class="title class_">Math</span>.<span class="title function_">max</span>(...interpolatedRawValues),</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">const</span> minimumTrackStyle = &#123;</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;absolute&#x27;</span>,</span><br><span class="line">            <span class="attr">left</span>:</span><br><span class="line">                interpolatedTrackValues.<span class="property">length</span> === <span class="number">1</span></span><br><span class="line">                    ? <span class="keyword">new</span> <span class="title class_">Animated</span>.<span class="title class_">Value</span>(<span class="number">0</span>)</span><br><span class="line">                    : <span class="title class_">Animated</span>.<span class="title function_">add</span>(minThumbValue, thumbSize.<span class="property">width</span> / <span class="number">2</span>),</span><br><span class="line">            <span class="attr">width</span>:</span><br><span class="line">                interpolatedTrackValues.<span class="property">length</span> === <span class="number">1</span></span><br><span class="line">                    ? <span class="title class_">Animated</span>.<span class="title function_">add</span>(</span><br><span class="line">                          interpolatedTrackValues[<span class="number">0</span>],</span><br><span class="line">                          thumbSize.<span class="property">width</span> / <span class="number">2</span>,</span><br><span class="line">                      )</span><br><span class="line">                    : <span class="title class_">Animated</span>.<span class="title function_">add</span>(</span><br><span class="line">                          <span class="title class_">Animated</span>.<span class="title function_">multiply</span>(minThumbValue, -<span class="number">1</span>),</span><br><span class="line">                          maxThumbValue,</span><br><span class="line">                      ),</span><br><span class="line">            <span class="attr">backgroundColor</span>: minimumTrackTintColor,</span><br><span class="line">            ...valueVisibleStyle,</span><br><span class="line">        &#125; <span class="keyword">as</span> <span class="title class_">ViewStyle</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> touchOverflowStyle = <span class="variable language_">this</span>.<span class="title function_">_getTouchOverflowStyle</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;renderAboveThumbComponent &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.aboveThumbComponentsContainer&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#123;interpolatedThumbValues.map((value, i) =&gt; (</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Animated.View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">slider-above-thumb-</span>$&#123;<span class="attr">i</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">style</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">styles.renderThumbComponent</span>, // <span class="attr">eslint-disable-next-line</span> <span class="attr">react-native</span>/<span class="attr">no-inline-styles</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">bottom:</span> <span class="attr">0</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">transform:</span> [</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                                <span class="attr">translateX:</span> <span class="attr">value</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                                <span class="attr">translateY:</span> <span class="attr">0</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        ],</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">...valueVisibleStyle</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                ]&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                                &#123;renderAboveThumbComponent(i)&#125;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">Animated.View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        ))&#125;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                )&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    &#123;<span class="attr">...other</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">style</span>=<span class="string">&#123;[styles.container,</span> <span class="attr">vertical</span> ? &#123;<span class="attr">transform:</span> [&#123;<span class="attr">rotate:</span> &#x27;<span class="attr">-90deg</span>&#x27; &#125;]&#125; <span class="attr">:</span> &#123;&#125;, <span class="attr">containerStyle</span>]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onLayout</span>=<span class="string">&#123;this._measureContainer&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">renderToHardwareTextureAndroid</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">style</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            <span class="attr">styles.track</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">backgroundColor:</span> <span class="attr">maximumTrackTintColor</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            <span class="attr">trackStyle</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onLayout</span>=<span class="string">&#123;this._measureTrack&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Animated.View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">renderToHardwareTextureAndroid</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">style</span>=<span class="string">&#123;[styles.track,</span> <span class="attr">trackStyle</span>, <span class="attr">minimumTrackStyle</span>]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;renderTrackMarkComponent &amp;&amp;</span></span><br><span class="line"><span class="language-xml">                        interpolatedTrackMarksValues &amp;&amp;</span></span><br><span class="line"><span class="language-xml">                        interpolatedTrackMarksValues.map((value, i) =&gt; (</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Animated.View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">track-mark-</span>$&#123;<span class="attr">i</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">style</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">styles.renderThumbComponent</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">transform:</span> [</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                                <span class="attr">translateX:</span> <span class="attr">value</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                                <span class="attr">translateY:</span> <span class="attr">0</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        ],</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">...valueVisibleStyle</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                ]&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                                &#123;renderTrackMarkComponent(i)&#125;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">Animated.View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        ))&#125;</span></span><br><span class="line"><span class="language-xml">                    &#123;interpolatedThumbValues.map((value, i) =&gt; (</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">Animated.View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">slider-thumb-</span>$&#123;<span class="attr">i</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            <span class="attr">style</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">renderThumbComponent</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    ? <span class="attr">styles.renderThumbComponent</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">:</span> <span class="attr">styles.thumb</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">renderThumbComponent</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    ? &#123;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">:</span> &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                          <span class="attr">backgroundColor:</span> <span class="attr">thumbTintColor</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                          <span class="attr">...thumbStyle</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                      &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">transform:</span> [</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            <span class="attr">translateX:</span> <span class="attr">value</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                            <span class="attr">translateY:</span> <span class="attr">0</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    ],</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">...valueVisibleStyle</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            <span class="attr">onLayout</span>=<span class="string">&#123;this._measureThumb&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;renderThumbComponent</span></span><br><span class="line"><span class="language-xml">                                ? renderThumbComponent()</span></span><br><span class="line"><span class="language-xml">                                : this._renderThumbImage(i)&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">Animated.View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    ))&#125;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">style</span>=<span class="string">&#123;[styles.touchArea,</span> <span class="attr">touchOverflowStyle</span>]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        &#123;<span class="attr">...this._panResponder.panHandlers</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#123;!!debugTouchArea &amp;&amp;</span></span><br><span class="line"><span class="language-xml">                            interpolatedThumbValues.map((value, i) =&gt;</span></span><br><span class="line"><span class="language-xml">                                this._renderDebugThumbTouchRect(value, i),</span></span><br><span class="line"><span class="language-xml">                            )&#125;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="导入部分："><a href="#导入部分：" class="headerlink" title="导入部分："></a>导入部分：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Slider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;所放的上述组件路径&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Slider</span></span><br><span class="line">minimumValue=&#123;<span class="number">1</span>&#125;</span><br><span class="line">maximumValue=&#123;<span class="number">7</span>&#125;  <span class="comment">//可滑动范围为1到7</span></span><br><span class="line">minimumTrackTintColor=<span class="string">&quot;#0A79C3&quot;</span> </span><br><span class="line">maximumTrackTintColor=<span class="string">&quot;#F3F3F3&quot;</span></span><br><span class="line">step=&#123;<span class="number">1</span>&#125; <span class="comment">//步长</span></span><br><span class="line">value=&#123;targetDay&#125; <span class="comment">//默认值，例如4</span></span><br><span class="line">onValueChange=&#123;<span class="function"><span class="params">targetDays</span> =&gt;</span> <span class="title function_">dispatch</span>(&#123;</span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;SetupWeekTarget/updateState&#x27;</span>,</span><br><span class="line"><span class="attr">payload</span>: &#123; <span class="attr">targetDay</span>: targetDays &#125;</span><br><span class="line">&#125;)&#125;  <span class="comment">//滑动触发的事件</span></span><br><span class="line">trackStyle=&#123;&#123; <span class="attr">height</span>: <span class="number">10</span>, <span class="attr">borderRadius</span>: <span class="number">12</span> &#125;&#125;  </span><br><span class="line">containerStyle=&#123;&#123; <span class="attr">width</span>: <span class="variable constant_">SCREEN_WIDTH</span> - <span class="number">90</span> &#125;&#125;</span><br><span class="line">thumbTintColor=<span class="string">&quot;transparent&quot;</span></span><br><span class="line">thumbImage=&#123;<span class="built_in">require</span>(<span class="string">&#x27;图片路径&#x27;</span>)&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h2 id="详细参数可参考链接："><a href="#详细参数可参考链接：" class="headerlink" title="详细参数可参考链接："></a>详细参数可参考链接：</h2><p><a href="https://github.com/miblanchard/react-native-slider">https://github.com/miblanchard/react-native-slider</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>小程序验证码输入框自动聚焦下个输入框</title>
      <link href="/2025/07/21/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%AA%8C%E8%AF%81%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86%E8%87%AA%E5%8A%A8%E8%81%9A%E7%84%A6%E4%B8%8B%E4%B8%AA%E8%BE%93%E5%85%A5%E6%A1%86/"/>
      <url>/2025/07/21/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%AA%8C%E8%AF%81%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86%E8%87%AA%E5%8A%A8%E8%81%9A%E7%84%A6%E4%B8%8B%E4%B8%AA%E8%BE%93%E5%85%A5%E6%A1%86/</url>
      
        <content type="html"><![CDATA[<p>最开始我想的是有多少个输入框，就放多少个input，做完会发现有各种bug。比如键盘突然消失、没聚焦下个输入框、操作不丝滑等。<br>正确思路是一个输入框就够了，然后通过改变样式（间隔、高亮）来实现，就是表面看起来是六个输入框，本质上只有一个input</p><h2 id="正确解法："><a href="#正确解法：" class="headerlink" title="正确解法："></a>正确解法：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;w-80 h-100 rad-10 b-a-9 tc f-50&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index)  in 6&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;w-80 h-100 &quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>    @<span class="attr">input</span>=<span class="string">&quot;inputListener(index)&quot;</span>   <span class="attr">:focus</span>=<span class="string">&quot;focus &amp;&amp; (focusIndex == index)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span> </span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        <span class="attr">focus</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">code</span>:[<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>],<span class="comment">// 需要获取焦点的序号</span></span><br><span class="line"><span class="attr">focusIndex</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">method</span>:&#123;</span><br><span class="line">      <span class="comment">// 输入时事件</span></span><br><span class="line"><span class="title function_">inputListener</span>(<span class="params">e</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">focusIndex</span> != e)<span class="variable language_">this</span>.<span class="property">focusIndex</span>=e</span><br><span class="line"><span class="keyword">if</span> (e &lt; <span class="number">6</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">focus</span>=<span class="literal">true</span>,</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">focusIndex</span>=e + <span class="number">1</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">focus</span>=<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="完整版可参考链接："><a href="#完整版可参考链接：" class="headerlink" title="完整版可参考链接："></a>完整版可参考链接：</h3><p><a href="https://blog.csdn.net/u011423258/article/details/106683068?spm=1001.2014.3001.5506">https://blog.csdn.net/u011423258/article/details/106683068?spm=1001.2014.3001.5506</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>聊聊Node RPC</title>
      <link href="/2025/07/16/node%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2025/07/16/node%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是序列化"><a href="#什么是序列化" class="headerlink" title="什么是序列化"></a>什么是序列化</h2><p>在 TCP 通道里传输的数据只能是二进制形式的，所以将数据结构或对象转化成二进制的形式就叫序列化。反过来就叫反序列化，他们之间的规则就叫协议。</p><h2 id="RPC是什么"><a href="#RPC是什么" class="headerlink" title="RPC是什么"></a>RPC是什么</h2><p>全称是Remote Procedure Call， 中文名字叫远程过程调用。大部份的 RPC 是基于TCP的。具体实现流程如下：</p><p>1、前端通过 Proxy 代理调用相应的接口, Proxy 将 RPC 的服务名，方法名，参数等信息转换成 RPC Request 对象，交给 RPC 框架<br>2、RPC 框架通过 RPC 协议将 RPC Request 对象序列化成二进制形式<br>3、RPC 通过 TCP 通道把二进制数据传递给后端<br>4、后端将二进制数据反序列化成 RPC Request 对象<br>5、后端将反序列化后的数据对应到自己写的方法内，传入参数，获取数据，将获取后的数据进行封装，封装成 RPC Response 交给 RPC 框架<br>6、RPC 框架通过 RPC 协议将 RPC Response 对象序列化成二进制形式, 通过 TCP 通道传递给前端<br>6、前端将收到的二进制数据反序列化成 RPC response 对象，将结果通过 Proxy 返回给业务代码</p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>初中英语教师资格语篇课模版</title>
      <link href="/2025/07/15/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E8%AF%AD%E7%AF%87%E8%AF%BE%E6%A8%A1%E6%9D%BF/"/>
      <url>/2025/07/15/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E8%AF%AD%E7%AF%87%E8%AF%BE%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>The intonation.（语调）<br>Express the different feelings of the speaker.<br>We often use the falling tone when we read a statement, a special question, an exclamatory or imperative sentence(祈使句、感叹句). We often use rising tone when we ask a Yes&#x2F;No question. We often use rising-falling tone to read an alternative question and a coordinate clause（选择疑问句、并列句）. There are two parts in a tag question（反义疑问句）. The first part is often in a falling tone and for second part, there are two cases. If we are not sure about the question, we often use a rising tone. If we are sure about that, we offen use a falling tone.<br>We choose different intonations to express different feelings and moods.</p><p>The word stress(单词重音)<br>Read words more exactly<br>When we say a word with more than one syllable, some of the syllables need to be stressed.<br>When we read two-syllable words, normally we stress the first syllable for nouns, and stress the second syllable for verbs. As for the multi-syllable words, we stress the third from the bottom.</p><p>The sentence stress（句子重读）<br>Draw attention to certain information.<br>We usually stress the lexical words such as nouns, verbs, adjectives, adverbs and numbers. We don’t stress the function words such as a, the, is, of and so on. Besides, you can stress some information you want to emphasis.<br>We should change it according to the situation and feelings of the speaker.</p><p>The liaison&#x2F;ˈlēəˌzän,lēˈāˌzän&#x2F;&#x2F;Word linking.(连读)<br>Speak English more fluently and naturally.<br>In one sense group, we can read the two words together if the former word ends with a consonant&#x2F;ˈkänsənənt&#x2F;, a vowel or “r” sound, and the following word begins with a vowel. If the two words finish and start with the same consonant, we only read one of the consonants.<br>The two words must be in one sense group.</p><p>incomplete plosion&#x2F;‘pləʊʒ(ə)n&#x2F;（不完全爆破）<br>Speak English more fluently and naturally.<br>There are six plosive sounds &#x2F;t&#x2F; &#x2F;d&#x2F; &#x2F;p&#x2F; &#x2F;b&#x2F; &#x2F;k&#x2F; &#x2F;g&#x2F; in English.When two consonants of them are next to each other, we read the former sound silently.<br>The two words must be in one sense group.</p><p>Weak form(弱读)<br>speak English more fluently and naturally.<br>Some words often appear in a weak form such as function words, articles, auxiliary verbs and modal verbs.<br>there are mainly three ways to change function words to weak forms. They are shortening, elision[ i’liʒən ] and vowel changed to schwa  [ʃwɑ:] sound.</p><p>Assimilation(同化)<br>We use it to speak English more fluently and naturally.<br>As we can see, Two different sounds affect each other and become more alike.<br>&#x2F;s+ j&#x2F; -&gt; &#x2F;F&#x2F;this year,&#x2F;d+j&#x2F; -&gt; &#x2F;d3&#x2F; would you</p><p>Sense group(意群)<br>We use it to make our expression more easily to understand.<br>As we can see, a sentence may consists of several groups according to meaning or structure. Each group is called a sense group. It can be a word, a phrase, a clause. After a sense group, there should be a short pause.<br>We should remind that we should change it according to the situation and feelings of the speaker.</p><p>The pause(停顿)<br>We use to speak English more fluently and naturally.<br>As we can see, in a long sentence, we should pause several times according to the sense group. Normally, we pause based on meaning and grammatical structure.<br>We should remind that there should be no pause in a sense group. Where to pause also depends on the situation and the feelings of the speaker.</p>]]></content>
      
      
      <categories>
          
          <category> 教资 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>初中英语教师资格作文课模版</title>
      <link href="/2025/07/14/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E4%BD%9C%E6%96%87%E6%A8%A1%E7%89%88/"/>
      <url>/2025/07/14/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E4%BD%9C%E6%96%87%E6%A8%A1%E7%89%88/</url>
      
        <content type="html"><![CDATA[<h2 id="开场问候"><a href="#开场问候" class="headerlink" title="开场问候"></a>开场问候</h2><p>Dear Judges, Now I’ll start the lesson. Good morning, Boys and girls. How are you today? Good? Fine? I’m fine, too. Before the class, Let’s sing a song together. If you can sing, sing along with me . “You are my sunshine, my only sunshine, you make me happy.” Do you feel better? Great, let’s start the lesson.<br>At the beginning, I’ll show you a video, and you should try to answer the question: What can you see in the video? Who would like to try? Blair, please. You saw the girl had much fun. She had dinner and went shopping with friends. Thank you, Blair, you set a good example for us. You know so much about this topic. Do you want to learn more? Today, let’s learn a new lesson — How was your day off.</p><h2 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h2><p>OK, everyone, here is a passage. I’ll read it for you. You should listen carefully and tell me the main idea, OK? Here we go! …….OK, Please share your ideas. Jenny, you please. It talks about the Bermuda Triangle, where a number of planes and ships disappeared.Do you agree? I totally agree with her.</p><h2 id="Pre"><a href="#Pre" class="headerlink" title="Pre"></a>Pre</h2><p>Boys and girls, since we already know the content of the letter, Let’s look at the structure of the letter.There are 4 parts of it, right?<br>The first one is to whom. We call it salutation&#x2F;ˌsalyəˈtāSH(ə)n&#x2F;, such as Hi Henry, Dear Lucy and so on. The second part is body part. You can write whatever you want. The third part, we often add complementary close&#x2F;wishes, such as ‘yours’, ‘sincerely’. The last part is from whom, we call it signature. Am I clear? So when we write a letter, we can imitate it. Brilliant!</p><p>the first part is introduction. It’s a fun day last Saturday. The second part is main body, it’s about what they did in the morning, afternoon and so on. The third part is conclusion. So if we want to write out our everyday life, we can imitate this structure, OK?</p><h2 id="写前"><a href="#写前" class="headerlink" title="写前"></a>写前</h2><p>Before writing, let’s have a brainstorm. As Tom, what information can you write to reply to Nick’s letter? You can have a discussion in groups. 3 minutes for you. Stop! Who can try, this boy? You will write some activities during camping. Your ideas are wonderful. Bravo! Thank you.<br>OK，I can see you all have many ideas. How about writing down your ideas with the structure we just learned. You have 2 minutes to design your outline.OK, time is up. Finished? I see all of you nod your heads. Very good!<br>It’s time to finish the whole letter. While writing, you should pay attention to the grammar.We should use simple past tense to talk about the experience in the past.And for the signature, you should write”Tom”. If you have any problems, just raise your hands, and I will help you. Are you ready? Let’s do it.</p><h2 id="写后"><a href="#写后" class="headerlink" title="写后"></a>写后</h2><p>Have you finished your writing? Show me your hands. Well done. Next, go over your writing one more time and then exchange it with your group members.Try to check and correct the mistakes, got it? You have 2 minutes.<br>Stop here.Who wants to share your writing? Cindy, please. Wow, good pronunciation. You state the story vividly. The logic is clear! OK, anyone else? Tony. Please. Oh, you want to present Tina’s article.Can you read it? Very good. Thank you, Tony. Guys, Let’s look at Tina’s work together. “Tom” went to a mountain for camping. I think her article is perfect. We can learn a lot from it. Boys and girls, you all did a good job!</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>How time files! The class is almost over. Before ending our class, let’s have a summary. Who can summarize what we have learned this class? Fiona please. Very good. I hope you can apply what we have learned in your daily life so that we can improve our reading and speaking ability, right?<br>Our homework is as follows: You should finish the exercise book and search for more information about ask your parents about their day off. Next class, we will share them together.</p><p>Class is over, see you next time.</p>]]></content>
      
      
      <categories>
          
          <category> 教资 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>初中英语教师资格语法课模版</title>
      <link href="/2025/07/11/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E8%AF%AD%E6%B3%95%E8%AF%BE%E6%A8%A1%E6%9D%BF/"/>
      <url>/2025/07/11/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E8%AF%AD%E6%B3%95%E8%AF%BE%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Grammer"><a href="#Grammer" class="headerlink" title="Grammer"></a>Grammer</h1><h2 id="开场问候"><a href="#开场问候" class="headerlink" title="开场问候"></a>开场问候</h2><p>Dear Judges, Now I’ll start the lesson. Good morning, Boys and girls. How are you today? Good? Fine? I’m fine, too. Before the class, Let’s sing a song together. If you can sing, sing along with me . “You are my sunshine, my only sunshine, you make me happy.” Do you feel better? Great, let’s start the lesson.</p><h2 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h2><p>基本跟上一篇一样，只是换了问题，根据材料的主题来问问题。比如：little prince and harry porter. Today, we’re going to learn a new grammar about it , the present perfect tense.</p><h2 id="Pre"><a href="#Pre" class="headerlink" title="Pre"></a>Pre</h2><p>Now boys and girls, let’s have a prediction according to the title and the conversation on your book. I will read for you.When you listen, think about this question: What’s the material mainly about? Try to think out as many answers as you can.(let’s begin,…..)OK, who wants to have a try?Justin, you please. The passage is about some books they have read. Nice try! Do you agree? OK, maybe you are right. You got the correct answer.</p><h2 id="While"><a href="#While" class="headerlink" title="While"></a>While</h2><p>Now boys and girls, let’s have a prediction according to the title and the pictures on your book. Take a guess:What’s the passage mainly about? Try to think out as many answers as you can. OK, who wants to have a try?Justin, you please. The passage is about a cartoon Mickey Mouse. Nice try! Do you agree? OK, maybe you are right.Next, Let’s find out the truth in this passage.</p><h2 id="语法教学"><a href="#语法教学" class="headerlink" title="语法教学"></a>语法教学</h2><p>All right guys, it’s time to learn something new. Here are some sentences. (板书)Let’s look at the first one. Can you read it together? Yes,1……2…<br>3….   Wonderful! It’s not difficult for you, right?<br>Now, boys and girls, please try to find the similarity among these sentences? You can work in groups and share your ideas with each other. Here we go.<br>So, did you find something in common? OK, who would like to try? Amanda, please. You have sharp eyes.Yes, they have the word “have&#x2F;has” and these are “yes&#x2F;no” questions.Yes, exactly!<br>Now, let’s put all your views&#x2F;points together. Boys and girls, This is what we will learn today, the present perfect tense.<br>We use it to talk about things that happened in the past but have a connection to the present in some way.<br>As we can see, the main structure of this grammar is “has&#x2F;have done”, right? We often use “yet” in this grammar. But we should remind that normally the rules of past participle form are the same as the past form, such as live&#x2F;lived. However, there are some irregular verbs, such as, put&#x2F;put&#x2F;put, read&#x2F;read&#x2F;read. We make the negative sentences like this:”has&#x2F;have not done”.Clear? You are so smart!</p><h2 id="巩固"><a href="#巩固" class="headerlink" title="巩固"></a>巩固</h2><p>practice makes perfect, so let’s do some exercises. Let’s “Fill in the blanks”. Now look at the Power Point. Please finish it as quickly as you can and we will check the answers later. Here we go.<br>Have you finished? What’s your answer, Cindy? Have you found your pen yet?-No, I haven’t. Do you agree with Cindy? Good, next one? Mike? He has turned off the light! All right, I think you have mastered it.</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>How time files! The class is almost over. Before ending our class, let’s have a summary. Who can summarize what we have learned this class? Fiona please. Very good. I hope you can apply what we have learned in your daily life so that we can improve our reading and speaking ability, right?<br>Our homework is as follows: You should finish the exercise book and search for more information about famous cartoons on the Internet. Next class, we will share them together.</p><p>Class is over, see you next time.</p><h2 id="其他语法模版"><a href="#其他语法模版" class="headerlink" title="其他语法模版"></a>其他语法模版</h2><p>The simple present tense(一般现在时)<br>the things or actions that happen regularly.<br>“Verb to be” has three forms: am&#x2F;is&#x2F;are. “Verb to do” has two forms: do&#x2F;does.<br>If the subject(主语) is first person or plural form, we should use do, if not, we use does.For the third singular form, normally we add s to the end, such as help&#x2F;helps. The second type is to add es, such as guess&#x2F;guesses. And the last type is to change y to i and add es, such as study&#x2F;studies.</p><p> the simple past tense.(一般过去时)<br>We use it to talk about the past events. (When)<br>As we can see, “verb to be” has two forms:was&#x2F;were, and we have to the change the<br>“verb to do” into past form, right? (Details)<br>We should remind that normally we add ed&#x2F;d to the end, such as look&#x2F;looked,<br>live&#x2F;lived. The second type is to double write the last letter and add ed, such as<br>stop&#x2F;stopped. And the last type is to change y to i and add ed, such as study&#x2F;studied.<br>There are also some irregular verbs, such as, put&#x2F;put, catch&#x2F;caught. </p><p>the simple future tense.(一般将来时中的will&#x2F;shall + do)<br>We use it to talk about our intentions or make predictions. (When)<br>As we can see, the main structure of this grammar is “will+do” , right?(Details)<br>We should remind that We should use the original form of the verbs. We make the<br>negative sentence like this: “will not do”. If the subject is the first person, we can<br>also use ‘shall’ instead of ‘will’.</p><p>the simple future tense.(一般将来时中的be going to + do)<br>We use it to talk about things that happen in the future. (When)<br>As we can see, the main structure of this grammar is “be going to do” , right?(Details)<br>We should remind that We should use the original form of the verbs. We make the<br>negative sentence like this: “be not going to do”.</p><p>the present progressive tense(现在进行时)<br>We use it to talk about what people are doing or what’s going on. (When)<br>As we can see, the main structure of this grammar is “be doing” , right? (Details)<br>We should remind that “verb to be” has three forms: am&#x2F;is&#x2F;are.We make the negative<br>sentences like this: “be not doing”.And we should change the verbs into ‘-ing’ form.<br>Normally we add -ing to the end, such as look&#x2F;looking. The second type is to remove e<br>and add -ing, such as write&#x2F;writing. And the last type is to double write the last letter<br>and add -ing, such as get&#x2F;getting.</p><p>the past progressive tense.(过去进行时)<br>We use it to talk about the past events in certain time. (When)<br>As we can see, the main structure of this grammar is “was&#x2F;were doing”, right? (Details)<br>We should remind that we should change the verbs into -ing form. Normally we add<br>ing to the end, such as look&#x2F;looking. The second type is to remove ‘e’ and add “ing” ,<br>such as write&#x2F;writing. And the last type is to double write the last letter and add ing,<br>such as get&#x2F;getting. We make the negative sentences like this: “was&#x2F;were not doing”.</p><p>the present perfect tense.（现在完成时）<br>We use it to talk about things that happened in the past but have a connection to the present in some way.<br>As we can see, the main structure of this grammar is “has&#x2F;have done”, right? We often use “yet” in this grammar. But we should remind that normally the rules of past participle form are the same as the past form, such as live&#x2F;lived. However, there are some irregular verbs, such as, put&#x2F;put&#x2F;put, read&#x2F;read&#x2F;read. We make the negative sentences like this:”has&#x2F;have not done”.</p><p>the present passive voice.(一般现在时的被动语态)<br>We use it to talk about the passive relationships between the subject and the object.(When)<br>As we can see, the main structure of this grammar is “be+done”, right? (Details)<br>We should remind that “verb to be” has three forms: am&#x2F;is&#x2F;are. We should use the<br>past participle form of transitive verbs. And there are some irregular verbs, such as,<br>put&#x2F;put&#x2F;put, catch&#x2F;caught&#x2F;caught.We make the negative sentences like this: “be not<br>done”.</p><p>the past passive voice.(一般过去时的被动语态)<br>We use it to talk about the passive relationships between the subject and the object.(When)<br>As we can see, the main structure of this grammar is “was&#x2F;were+done”, right? (Details)<br>We should remind that we should use the past participle form of transitive verbs. And<br>there are some irregular verbs, such as, put&#x2F;put&#x2F;put, catch&#x2F;caught&#x2F;caught.We make the<br>negative sentences like this: “w as&#x2F;were not done”.</p><p>the attributive clause. （定语从句-名词之后出现）<br>Describe the nouns more exactly.<br>the relative pronouns(代词) should be used to link the main clause and the clause.They are ‘that&#x2F;which&#x2F;who&#x2F;whom&#x2F;whose’.<br>’that&#x2F;which&#x2F;who’ can be used as subject(主语) or object(宾语) of a clause, ‘whom’ can be as object, whose can be as attributive(定语). ’That’ can be used to refer to the things or people, ‘which’ for things, ‘who&#x2F;whom’ for people.</p><p>the objective clause.（宾语从句-谓语动词后面出现）<br>express our thoughts more exactly.<br>There are three kinds of objective clauses. The first one is with ‘that’, the second one is with ‘if&#x2F;whether’, the last one is with ‘wh-words’.<br>The order of words in the objective clauses should be written in statements and the tense should be changed according to the main clause.</p><p>The first conditional if.<br>Talk about the things happen in certain condition.<br>The main structure of this grammar is “First conditional if+will”(板书例句)<br>The main clause is in the future tense. The clause is in the present tense.(主将从现) And the first conditional if can be put before or after the main clause.</p><p>the imperative sentence.（祈使句）<br>Ask for permission, order or warn sb (not) to do sth.<br>The imperatives begin with the original form of the verb<br>The subject of the imperative is ‘you’ which is omitted. We make the negative sentences like this. “Don’t do sth”.</p><p>There be sentences.<br>we use it to Describe things or people.<br>As we can see, The main structure of this grammar is There be something&#x2F;somebody in someplace&#x2F;sometime, right?<br>But we should remind that “verb to be” has two forms: is&#x2F;are. We should change it according to the nouns after it. We make the negative sentences like this: “There is&#x2F; are not.”</p><p>the nouns.(名词)<br>Describe things or people.<br>There are countable nouns and uncountable nouns, right?<br>Countable nouns have two forms: the singular and the plural. Normally, we add s to the end, such as book&#x2F;books. The second type is to add es, such as class&#x2F;classes. And the last type is to change y to i and add es, such as family&#x2F;families. There are also some irregular nouns, such as man&#x2F;men, sheep&#x2F;sheep, child&#x2F;children.</p><p>the comparatives.（比较级）<br>Compare different objects or people.<br>We usually add ‘er&#x2F;r’ to the end of adjectives or adverbs,  such as tall&#x2F;taller, slow&#x2F;slower, late&#x2F;later. And add ‘more’ before the multi-syllable words, such as ‘more beautiful’.<br>There are some irregular changes, such as good&#x2F;better, bad&#x2F;worse.</p><p>The superlatives.(最高级)<br>Compare different objects or people.<br>We usually add est&#x2F;st to the end of the adjectives or adverbs, such as tall&#x2F;tallest, slow&#x2F;slowest, late&#x2F;latest.And add ‘most’ before the words, such as most beautiful.<br>There are some irregular changes, such as good&#x2F;best, bad&#x2F;worst. And we should add ‘the’ before the superlatives.</p><p>Adverbs of frequency.(频率副词)<br>Talk about how often we do things.<br>There are always, usually, often, sometimes, hardly ever(seldom), never.<br>If we put them in order, it will be like that always&gt;usually&gt;often&gt;sometimes&gt;hardly ever(seldom)&gt;never.</p><p>The indefinite pronouns some and any.(普通不定代词)<br>Refer to people or things.<br>Normally some is used in statements(肯定句), any is used in negative statements or questions, right? They can both replace or modify the plural nouns and uncountable nouns.（可数名词复数以及不可数名词）<br>If we want the answer to the question is yes, we can also use some in questions. For example, would you like some tea?</p><p>The indefinite pronouns many and much.<br>Refer to people or things.<br>Many can replace or modify plural nouns, and much can replace or modify the uncountable nouns, right?<br>We use “How many…” questions to ask about the plural nouns, and “How much…” question to ask about the uncountable nouns.</p><p>the compound indefinite pronouns something, anything, nothing(复合不定代词)<br>Refer to people or things.<br>If the subject is something, anything… it is seen as singular(单数形式), right?<br>We should put the adjectives after the indefinite pronouns. For example, something important.</p><p>the modal verbs.(情态动词)<br>Make inferences.(作出推断)<br>The main structure of this grammar is “modal verbs + be”, right?<br>Some modal verbs can be used for making inferences. They are must, can’t, could, may, might. We use must to show that we think something is probably true. And use may, might and could to show that we think something is possibly true. Use can’t to show that you are almost sure something is not true. </p>]]></content>
      
      
      <categories>
          
          <category> 教资 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>初中英语教师资格面试模板（Reading）</title>
      <link href="/2025/07/09/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E9%9D%A2%E8%AF%95%E6%A8%A1%E6%9D%BF/"/>
      <url>/2025/07/09/%E5%88%9D%E4%B8%AD%E8%8B%B1%E8%AF%AD%E6%95%99%E8%B5%84%E9%9D%A2%E8%AF%95%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Reading-Listening"><a href="#Reading-Listening" class="headerlink" title="Reading&#x2F;Listening"></a>Reading&#x2F;Listening</h1><h2 id="开场问候"><a href="#开场问候" class="headerlink" title="开场问候"></a>开场问候</h2><p>Dear Judges, Now I’ll start the lesson. Good morning, Boys and girls. How are you today? Good? Fine? I’m fine, too. Before the class, Let’s sing a song together. If you can sing, sing along with me . “You are my sunshine, my only sunshine, you make me happy.” Do you feel better? Great, let’s start the lesson.</p><h2 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h2><p>At the beginning, I’ll show you a video, and you should try to answer the question: What can you see in the video? Who would like to try? Blair, please. You see different cartoons, such as Snow White and Tom and Jerry.Thank you, Blair, you set a good example for us. You know so much about cartoons.Do you want to learn more? Today, let’s learn a new lesson — Cartoon.</p><h2 id="读前"><a href="#读前" class="headerlink" title="读前"></a>读前</h2><p>Before reading, To help you understand the passage better, let’s learn some words. Now, Look at the first one. Smart.Form example, Zhu Geliang is very smart and he can solve many problems. Can you understand now? Great! The next one cute. Look at the picture. What’s that? A cat. So cats are very cute and it’s very lovely. So cute means lovely. You are so cute. Cats are so cute. Birds are so cute, okay, wonderful How about the last one? Ivory. Here is a picture about ivory. It forms long teeth of elephants. Read after me, ivory, ivory. Well done! All of you did a good job.</p><h2 id="读中"><a href="#读中" class="headerlink" title="读中"></a>读中</h2><p>Now boys and girls, let’s have a prediction according to the title and the pictures on your book. Take a guess:What’s the passage mainly about? Try to think out as many answers as you can. OK, who wants to have a try?Justin, you please. The passage is about a cartoon Mickey Mouse. Nice try! Do you agree? OK, maybe you are right.Next, Let’s find out the truth in this passage.</p><h2 id="读后"><a href="#读后" class="headerlink" title="读后"></a>读后</h2><p>Let’s read it together.When you read, think about this question:What’s the passage mainly about? You should read quickly and check your prediction.Let’s begin.<br>OK, guys, are you right? Wow, I heard John said he had the correct prediction.The passage tells us some information about Mickey Mouse. Oh, most of you are right! I am so proud of you.<br>For the second time, you should read it carefully and catch some detail informations. After that, you should answer some true or false question. Okay? Let’s start. Time is up. The first one, It’s easy, right? Answer me together. It’s true. Then the second question. Lily, what’s your answer? It ’s false. Can you correct it ? Great. Thank you. The last one, boys come on. Eric please. It’s true.perfect.</p><h2 id="巩固"><a href="#巩固" class="headerlink" title="巩固"></a>巩固</h2><p>We have done so many exercises.It’s time for fun. Let’s have a group discussion. Think about the topic: Introducing your favorite cartoon characters to group members. Work in group of 4 and discuss with your partners. Then show your work on the stage. You have 5 minutes to prepare.Are you ready? Go!  Time  is up. Which group goes first? Christina and your partners, please. Wow, your ideas are very creative and Your pronunciation is perfect.Let’s give them a big hand.</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>How time files! The class is almost over. Before ending our class, let’s have a summary. Who can summarize what we have learned this class? Fiona please. Very good. I hope you can apply what we have learned in your daily life so that we can improve our reading and speaking ability, right?<br>Our homework is as follows: You should finish the exercise book and search for more information about famous cartoons on the Internet. Next class, we will share them together.</p><p>Class is over, see you next time.</p>]]></content>
      
      
      <categories>
          
          <category> 教资 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>前端骨架屏</title>
      <link href="/2025/07/07/%E5%89%8D%E7%AB%AF%E9%AA%A8%E6%9E%B6%E5%B1%8F/"/>
      <url>/2025/07/07/%E5%89%8D%E7%AB%AF%E9%AA%A8%E6%9E%B6%E5%B1%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="Dps-config-js-中文说明文档"><a href="#Dps-config-js-中文说明文档" class="headerlink" title="Dps.config.js 中文说明文档"></a>Dps.config.js 中文说明文档</h1><p>本配置文件用以生成 Vue 应用的骨架屏。</p><hr><h2 id="基本配置字段说明"><a href="#基本配置字段说明" class="headerlink" title="基本配置字段说明"></a>基本配置字段说明</h2>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">const</span> dpsConfig = &#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;file:///Users/myname/Desktop/project/pro/scaleTips/dist/index.html#/&#x27;</span>,     </span><br><span class="line">     <span class="comment">// 待生成骨架屏页面的地址，用百度（https://baidu.com）试试也可以</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filepath</span>: <span class="string">&#x27;/Users/myname/Desktop/project/pro&#x27;</span>,</span><br><span class="line">        <span class="comment">// 生成骨架屏的存放页面，一般为项目的入口页面</span></span><br><span class="line">        <span class="attr">injectSelector</span>: <span class="string">&#x27;#app&#x27;</span>  </span><br><span class="line">        <span class="comment">// 生成的骨架屏插入页面的节点</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// header: &#123;</span></span><br><span class="line">    <span class="comment">//  height: 40,</span></span><br><span class="line">    <span class="comment">//  background: &#x27;#1b9af4&#x27;</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="comment">// background: &#x27;#eee&#x27;,</span></span><br><span class="line">    <span class="comment">// animation: &#x27;opacity 1s linear infinite;&#x27;,</span></span><br><span class="line">    <span class="comment">//用于定制或排除某些节点的绘制行为</span></span><br><span class="line">    <span class="attr">includeElement</span>: <span class="keyword">function</span>(<span class="params">node, draw</span>) &#123;</span><br><span class="line">        <span class="comment">// 定制某个节点画出来的样子，带上return false</span></span><br><span class="line">        <span class="keyword">if</span>(node.<span class="property">id</span> == <span class="string">&#x27;ui-alert&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">//跳过该节点及其子节点</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.<span class="property">tagName</span>.<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;img&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// 对该图片生成宽100%，高8%，颜色为红色的色块</span></span><br><span class="line">            <span class="title function_">draw</span>(&#123;</span><br><span class="line">                <span class="attr">width</span>: <span class="number">100</span>,</span><br><span class="line">                <span class="attr">height</span>: <span class="number">8</span>,</span><br><span class="line">                <span class="attr">left</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">top</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">zIndex</span>: <span class="number">99999999</span>,</span><br><span class="line">                <span class="attr">background</span>: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// writePageStructure: function(html) &#123;</span></span><br><span class="line">        <span class="comment">// 自己处理生成的骨架屏</span></span><br><span class="line">        <span class="comment">// fs.writeFileSync(filepath, html);</span></span><br><span class="line">        <span class="comment">// console.log(html)</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="attr">init</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 生成骨架屏之前的操作，比如删除干扰节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = dpsConfig;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>H5与原生交互</title>
      <link href="/2025/07/04/H5%E4%B8%8E%E5%8E%9F%E7%94%9F%E4%BA%A4%E4%BA%92/"/>
      <url>/2025/07/04/H5%E4%B8%8E%E5%8E%9F%E7%94%9F%E4%BA%A4%E4%BA%92/</url>
      
        <content type="html"><![CDATA[<h2 id="H5手机端日志工具-vconsole手机端-："><a href="#H5手机端日志工具-vconsole手机端-：" class="headerlink" title="H5手机端日志工具(vconsole手机端)："></a>H5手机端日志工具(vconsole手机端)：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/vConsole/3.15.1/vconsole.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 初始化 vConsole</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vConsole = <span class="keyword">new</span> <span class="title class_">VConsole</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;vConsole is ready.&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="第一种情况：传数据给原生端"><a href="#第一种情况：传数据给原生端" class="headerlink" title="第一种情况：传数据给原生端"></a>第一种情况：传数据给原生端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">webkit</span> != <span class="literal">undefined</span>) &#123;</span><br><span class="line">  <span class="comment">//这是ios端定义的</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">webkit</span>.<span class="property">messageHandlers</span>.<span class="property">getUserInfo</span>.<span class="title function_">postMessage</span>(<span class="literal">null</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//这是android端定义的feedback</span></span><br><span class="line">  feedback.<span class="title function_">getUserInfo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">webkit</span> != <span class="literal">undefined</span>) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">webkit</span>.<span class="property">messageHandlers</span>.<span class="property">feedback</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;测试分享的标题&quot;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&quot;测试分享的内容&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;https://github.com/maying1992&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// try &#123;</span></span><br><span class="line">  <span class="comment">//   result = feedback.getUserInfo();</span></span><br><span class="line">  <span class="comment">// &#125; catch(err)&#123;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  feedback.<span class="title function_">postMessage</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第二种情况：获取原生端的数据"><a href="#第二种情况：获取原生端的数据" class="headerlink" title="第二种情况：获取原生端的数据"></a>第二种情况：获取原生端的数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//window挂载</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">setUserInfo</span> = <span class="variable language_">this</span>.<span class="property">setUserInfo</span>;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="title function_">setUserInfo</span>(<span class="params">param</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> u = navigator.<span class="property">userAgent</span>;</span><br><span class="line">  <span class="keyword">const</span> isiOS = !!u.<span class="title function_">match</span>(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>); <span class="comment">//ios终端</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(param);</span><br><span class="line">  <span class="keyword">if</span> (isiOS) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queryParams</span> = result.<span class="property">userInfo</span>.<span class="property">token</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//兼容原生端那边传过来的不统一值</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      result.<span class="property">userInfo</span>.<span class="property">userId</span> == <span class="literal">undefined</span> ||</span><br><span class="line">      result.<span class="property">userInfo</span>.<span class="property">userId</span> == <span class="number">0</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">usrIdd</span> = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">usrIdd</span> = result.<span class="property">userInfo</span>.<span class="property">userId</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;lang&quot;</span>, result.<span class="property">userInfo</span>.<span class="property">language</span>);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queryParams</span> = result;</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">userId</span> == <span class="literal">undefined</span> || result.<span class="property">userId</span> == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">usrIdd</span> = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">usrIdd</span> = result.<span class="property">userId</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;lang&quot;</span>, result.<span class="property">language</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$i18n</span>.<span class="property">locale</span> = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;lang&quot;</span>);</span><br><span class="line">  <span class="comment">// let data = &#123;</span></span><br><span class="line">  <span class="comment">//   &#x27;name&#x27; : &#x27;xiaoming&#x27;</span></span><br><span class="line">  <span class="comment">// &#125;;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;lang&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="当需要通过按钮跳转到app时："><a href="#当需要通过按钮跳转到app时：" class="headerlink" title="当需要通过按钮跳转到app时："></a>当需要通过按钮跳转到app时：</h2><p>直接用 <code>a</code> 标签的 <code>href</code> 跳转，前提是原生应用定义了 <code>myapp://***</code> 作为触发特定功能的URL，可参考 Instagram 的 H5 跳转 app 的竞品例子，<code>instagram://**</code>。<br>一般跳不过去就是原生端不支持。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 基础</title>
      <link href="/2025/07/02/js%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/07/02/js%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript-基础总结（变量提升、严格模式）"><a href="#JavaScript-基础总结（变量提升、严格模式）" class="headerlink" title="JavaScript 基础总结（变量提升、严格模式）"></a>JavaScript 基础总结（变量提升、严格模式）</h1><hr><h2 id="变量与函数提升规则"><a href="#变量与函数提升规则" class="headerlink" title="变量与函数提升规则"></a>变量与函数提升规则</h2><ul><li><strong>变量提升</strong>：按顺序执行，变量声明提升但赋值不会提升。</li><li><strong>函数提升</strong>：整个函数体提升到全局作用域顶部。</li><li><strong>优先级</strong>：函数提升 &gt; 变量提升。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// 正常调用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数提升成功&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="使用-use-strict-严格模式"><a href="#使用-use-strict-严格模式" class="headerlink" title="使用 use strict 严格模式"></a>使用 <code>use strict</code> 严格模式</h2><h3 id="作用："><a href="#作用：" class="headerlink" title="作用："></a>作用：</h3><ul><li>避免创建<strong>意外的全局变量</strong>；</li><li>禁止使用未声明变量，防止内存泄漏；</li><li><code>this</code> 默认绑定到 <code>undefined</code> 而非 <code>window</code>。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>); <span class="comment">// ❌ TypeError</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// 严格模式下 this 是 undefined，无法读取 this.a</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">  <span class="title function_">foo</span>(); <span class="comment">// 严格模式下调用函数则不影响默认绑定</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2022应届毕业生办理深户流程</title>
      <link href="/2025/07/01/%E6%B7%B1%E6%88%B7%E5%8A%9E%E7%90%86%E6%B5%81%E7%A8%8B/"/>
      <url>/2025/07/01/%E6%B7%B1%E6%88%B7%E5%8A%9E%E7%90%86%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<!-- # 2022应届毕业生办理深户流程 --><h2 id="1-登录广东政务服务网申请毕业生接收"><a href="#1-登录广东政务服务网申请毕业生接收" class="headerlink" title="1. 登录广东政务服务网申请毕业生接收"></a>1. 登录广东政务服务网申请毕业生接收</h2><ul><li>打开 <a href="https://www.gdzwfw.gov.cn/">广东政务服务网</a></li><li>搜索“人才引进” → 选择“接收毕业生”</li><li>填写个人资料后，下载电子版《申请书》</li></ul><h2 id="2-报到证改派"><a href="#2-报到证改派" class="headerlink" title="2. 报到证改派"></a>2. 报到证改派</h2><ul><li>每个地区流程略有不同，建议致电报到证抬头地区的人社局咨询</li><li>示例：汕尾市城区 → 在广东政务服务网搜索“档案转出” → 点击在线办理</li><li>上传报到证、申请表等资料到“调函”栏目</li><li>不久后，工作人员会联系确认是否需要电子版“同意改派”文件（推荐选择电子版）, 她会把电子版的“同意改派”发到我们填的邮箱里。</li></ul><p>其他地区如潮州市：可直接在广东政务服务网搜索“报到证改派”在线办理</p><h2 id="3-上传材料至“广东就业创业”小程序"><a href="#3-上传材料至“广东就业创业”小程序" class="headerlink" title="3. 上传材料至“广东就业创业”小程序"></a>3. 上传材料至“广东就业创业”小程序</h2><ul><li>打开小程序，选择应届生接收模块</li><li>上传材料：电子版“同意改派”的报到证、申请表、三方协议等</li><li>等待校方审核通过</li></ul><h2 id="4-返回广东政务服务网上传最终材料"><a href="#4-返回广东政务服务网上传最终材料" class="headerlink" title="4. 返回广东政务服务网上传最终材料"></a>4. 返回广东政务服务网上传最终材料</h2><ul><li>上传审核通过后的报到证等资料</li><li>审核通过后会收到含有“指标卡”的短信通知</li></ul><h2 id="5-在“深圳本地宝”预约现场办理"><a href="#5-在“深圳本地宝”预约现场办理" class="headerlink" title="5. 在“深圳本地宝”预约现场办理"></a>5. 在“深圳本地宝”预约现场办理</h2><ul><li>打开“深圳本地宝”微信公众号，搜索“大学生”</li><li>进入现场办理流程 → 点击“户政预约” → 选择“普通户政预约”</li><li>预约业务选择“接收应届生户籍迁入”</li><li>选择时间和地点并预约成功后，带好上述资料和以下材料前往办理：<ul><li>户口本</li><li>身份证及二代回执</li><li>一寸白底照片</li></ul></li></ul><h2 id="6-第一次现场办理后领取档案袋"><a href="#6-第一次现场办理后领取档案袋" class="headerlink" title="6. 第一次现场办理后领取档案袋"></a>6. 第一次现场办理后领取档案袋</h2><ul><li>办理后工作人员会发放档案袋</li><li>需在五个工作日后再次前往办理</li></ul><h2 id="7-第二次预约并完成迁户手续"><a href="#7-第二次预约并完成迁户手续" class="headerlink" title="7. 第二次预约并完成迁户手续"></a>7. 第二次预约并完成迁户手续</h2><ul><li>提前预约，带齐上次材料再次前往办理</li><li>办理成功后可选择身份证邮寄</li></ul><hr><p><strong>备注：</strong> 整个流程较为繁琐，建议提前准备资料并留意预约时间。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>遇见未知的自己</title>
      <link href="/2025/06/30/%E9%81%87%E8%A7%81%E6%9C%AA%E7%9F%A5%E7%9A%84%E8%87%AA%E5%B7%B1/"/>
      <url>/2025/06/30/%E9%81%87%E8%A7%81%E6%9C%AA%E7%9F%A5%E7%9A%84%E8%87%AA%E5%B7%B1/</url>
      
        <content type="html"><![CDATA[<h1 id="《遇见未知的自己》读书笔记"><a href="#《遇见未知的自己》读书笔记" class="headerlink" title="《遇见未知的自己》读书笔记"></a>《遇见未知的自己》读书笔记</h1><h2 id="何为“未知”？"><a href="#何为“未知”？" class="headerlink" title="何为“未知”？"></a>何为“未知”？</h2><p>“自己”即指“真我”，从“我是谁”到后来的“从有到无”，整本书以若菱与一位智者老人的对话为主线，引申出许多深刻的生命观念。</p><hr><!-- ![](/images/jc.jpeg =100x100) --><div style="    display: flow-root;"><img src="/images/jc.jpeg"  width="400" align = "left"/></div><h2 id="核心观点"><a href="#核心观点" class="headerlink" title="核心观点"></a>核心观点</h2><ul><li><p><strong>外面没有别人，只有你自己。</strong><br>所有的外境，其实都是内心的投射。</p></li><li><p><strong>与潜意识对话的黄金时刻</strong><br>想象自己已经实现目标的最佳时刻，是清晨将醒未醒、夜晚将睡未睡之间的那段时间，因为那时我们最接近潜意识。</p></li><li><p><strong>关键修炼：觉察、臣服、战胜胜肽（小我）</strong></p><ul><li><strong>觉察</strong>：关注当下的自己，不批判地观察情绪和反应。</li><li><strong>臣服</strong>：接受现实，而不是抗拒。</li><li><strong>胜肽小我</strong>：代表恐惧、比较、焦虑的内在声音，要学会看见并超越它。</li></ul><br/></li><li><p><strong>冥想、感恩、付出</strong></p><ul><li>冥想时，要设想自己已经拥有渴望的生活。</li><li>在实现之前就先学会感恩。</li><li>保持利他、愿意付出的心态。</li></ul><br/></li><li><p><strong>少关心别人，多关心自己</strong></p><ul><li>注意力回到自己身上，关注内在世界。</li><li>当情绪上来时，觉察身体哪个部位最不舒服，了解内在信号。</li></ul></li></ul><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这本书不只是关于“找到自己是谁”，更是提醒我们“成为那个自己”。内在力量的唤醒，需要持续的觉察、练习与自我超越。</p>]]></content>
      
      
      <categories>
          
          <category> 读书感悟 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>《当我谈跑步时，我谈些什么》读后感</title>
      <link href="/2025/06/26/%E5%BD%93%E6%88%91%E8%B0%88%E8%B7%91%E6%AD%A5%E6%97%B6/"/>
      <url>/2025/06/26/%E5%BD%93%E6%88%91%E8%B0%88%E8%B7%91%E6%AD%A5%E6%97%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="《当我谈跑步时，我谈些什么》"><a href="#《当我谈跑步时，我谈些什么》" class="headerlink" title="《当我谈跑步时，我谈些什么》"></a>《当我谈跑步时，我谈些什么》</h2><p>也就是看了这本书，才知道世界上会有另一个自己在做着自己喜欢的事情。看这本书之前，从没有看过村上君写的书。知道有这么一个火人，也知道那么多火书，但就是没怎么看过。可论及跑步呀，觉得能与之有所交流。一直跑下去，会不会就到月球上了呢？跑步并非为了长命百岁，而是在有限生命里让自己活得更轻松点罢了。</p><p>惊喜于能发现村上君跑步时的想象力，天马行空我很喜欢，我也曾幻想过很多，也会跑着跑着就突然想起一句歌词，什么现在加快速度追幸福呀 blala……长跑需要耐力，但没有想象力可不行哟。当然前提是热爱跑步，一个不喜欢跑步的人，你说再多也无动于衷；一个热爱跑步的人，即使是雨天，也想要在停雨空隙去相遇另一个自己。人本孤独，但精神却能得到共鸣。</p><p>想着未来一定会坚持跑下去，不管世界如何变化。自从有次在外一整天走了 30 公里，除了身体上晒伤的疼痛以外，我更喜欢的是精神世界的富足。没经历过，就没有话语权。可能我跟陈坤一样，是个悲观的极乐主义者，在世上积极活着，却也看透红尘。不以物喜，不以己悲。脉搏也降到一分钟 50 多次，看来还是很适合慢跑的。说这么多，主要还是兴趣使然。只要不限制我的自由，一切好说。</p><p>想着来年，我也会参加马拉松，然后旁边的人都在为我加油，那该有多 happy。</p><p>“我不是人，是一架纯粹的机器，所以什么也无须感觉，唯有向前奔跑。”</p><p>极为像的一点就是我们都喜欢不停地奔跑，不是那种觉得自己快不行了就走几步，也不是适当的时候停下来看风景。可能每个人的见解不同。但我觉得能不停跑下去的人才是真正的王者。</p><p>当抵达终点那一刻，会觉得怎么那么酷，一股自豪感涌上来，就好比中了彩票或是走了狗屎运。这是原则，亦是我的骄傲。</p><p>噢对，好比尚三哥在终点等着我，然后我得意地笑了。</p>]]></content>
      
      
      <categories>
          
          <category> 读书感悟 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>《皮囊》感悟</title>
      <link href="/2025/06/26/%E7%9A%AE%E5%9B%8A%E6%84%9F%E6%82%9F/"/>
      <url>/2025/06/26/%E7%9A%AE%E5%9B%8A%E6%84%9F%E6%82%9F/</url>
      
        <content type="html"><![CDATA[<h2 id="阿太"><a href="#阿太" class="headerlink" title="阿太"></a>阿太</h2><p>阿太倔强坚强，豁达的心态值得人学习。父亲最强大的地方就是娶了我的母亲。一个伟大的女人。真正的女人就是应该要积极乐观面对一切，用自己的双手打造自己想要的未来。</p><p>虽然有偷窃，但也是生活所迫，为了生存，为了家人，放下面子干一些违心事，又何尝不是一种积极的心态呢？而不是一哭二闹三上吊。</p><p>想来作者能有如此作为，跟他伟大的母亲脱不了干系。</p><p>那可爱的母亲呀！为了父亲的面子，为了父亲开心，都坚持要把房子建完，这何尝不是一种力量，向往心之所向，佩服这种勇气。</p><p>其实最了解父亲的人是母亲，母亲知道父亲好面子，爱情不就是这样吗？你不用说，我懂，我懂你懂我，所以我们才会在一起这么久。</p><h2 id="张美丽"><a href="#张美丽" class="headerlink" title="张美丽"></a>张美丽</h2><p>从哪里跌倒，就从哪里爬起来。仿佛看见一个追求真爱，为爱为自己想要的东西不懈努力的人，虽说最终还是被迫性解放了自己，但她曾经的所作所为仍让我敬佩。</p><p>舆论的力量是强大的，但比其而言，张美丽的内心力量更强大。</p>]]></content>
      
      
      <categories>
          
          <category> 读书感悟 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>《终有一天你会懂》琢磨先生 - 读书笔记</title>
      <link href="/2025/05/21/%E3%80%8A%E7%BB%88%E6%9C%89%E4%B8%80%E5%A4%A9%E4%BD%A0%E4%BC%9A%E6%87%82%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%20-%20%E7%90%A2%E7%A3%A8%E5%85%88%E7%94%9F/"/>
      <url>/2025/05/21/%E3%80%8A%E7%BB%88%E6%9C%89%E4%B8%80%E5%A4%A9%E4%BD%A0%E4%BC%9A%E6%87%82%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%20-%20%E7%90%A2%E7%A3%A8%E5%85%88%E7%94%9F/</url>
      
        <content type="html"><![CDATA[<!-- ![示例图片](images/logo.svg) --><p>全书的确包含了很多他自己的“偏见”，但我觉得他真实幽默，语言简单易懂，其实各个小标题就是告诉我们该做什么。</p><h2 id="懂生活"><a href="#懂生活" class="headerlink" title="懂生活"></a>懂生活</h2><p>生活从来不是你想怎样就能变成怎样的。生活中多发现美，多从他人角度看待事情，是好的。同时自己还要有自知之明。</p><h2 id="懂爱情"><a href="#懂爱情" class="headerlink" title="懂爱情"></a>懂爱情</h2><p>谢耳朵说：人穷尽一生追寻另一个人类共度一生的事，我一直无法理解。或许我自己太有意思，无需他人陪伴。所以我祝你们在对方身上得到的快乐，与我给自己的一样多。<br>靠另一个人永远无法让你摆脱孤独，只能靠自己对生活的热情。经营一段感情要的是理智，自由是不可剥夺的。这让我想起对前任，我曾经有查看过他的手机，我觉得挺不对，以后不会再出现这种事情了。</p><h2 id="懂兵法"><a href="#懂兵法" class="headerlink" title="懂兵法"></a>懂兵法</h2><p>主要就是介绍女追男或男追女的技巧，以及如何经营好一段感情，就是大智慧。同时千万别因为家庭放弃自己的事业，不要跟公公婆婆住一起（但我的观点还是觉得因人而异），要有属于自己的兴趣爱好。</p><h2 id="懂婚姻"><a href="#懂婚姻" class="headerlink" title="懂婚姻"></a>懂婚姻</h2><p>忍，忠一。对于不婚主义，当然也没什么想多说的了。</p><h2 id="懂失意"><a href="#懂失意" class="headerlink" title="懂失意"></a>懂失意</h2><p>每一次失恋，只不过是在为真爱让路。还是那句勉强不来，我爱你，所以我祝你一生如意，即使陪着你的人，不是我。<br>做自己想做的事，不要管他人怎么想。只关心自己在乎的人。</p><h2 id="懂阅读"><a href="#懂阅读" class="headerlink" title="懂阅读"></a>懂阅读</h2><p>What Why How。一直阅读下去，不要求快，要求精。</p><h2 id="懂情趣"><a href="#懂情趣" class="headerlink" title="懂情趣"></a>懂情趣</h2><p>介绍了他与妻子的日常 sweet，告诉我们不分手，就不知道世界上还有那么多人值得我们去爱。如果找到了，是我的幸运，如果找不到，我也有能力让自己快乐地活着。<br>高情商地活着，会发觉世界是那么美好。</p><h2 id="懂交际"><a href="#懂交际" class="headerlink" title="懂交际"></a>懂交际</h2><p>跟正经人交往，跟不同人要有不同方式去与之交往，拒绝别人也是一门艺术。如果没有厚脸皮去找别人还钱，干脆别借。</p><h2 id="懂人性"><a href="#懂人性" class="headerlink" title="懂人性"></a>懂人性</h2><p>只能说我可能在人性方面持怀疑态度，管不了别人，那么就只能管好自己，别做个恶俗的人。</p><h2 id="懂善恶"><a href="#懂善恶" class="headerlink" title="懂善恶"></a>懂善恶</h2><p>有些人在你生命中出现，就是为了给你上一课。何为善何为恶，我宁愿相信他人的话，因为人与人之间的信任本来就是有一方愿意相信，另一方才会不负此信。<br>即使被骗，也是告诉我们下次同样的坑，别再跳了。但别因为入了一次坑，就不再相信了，善人始终存在。<br>上帝让右手成为右手，就是对右手最高的奖赏；同理，上帝让善人成为善人，也就是对善人的最高奖赏。<br>这让我想起，有次在外，洗手间里没有纸巾，原本是想问旁边的好朋友有没有纸巾的，结果旁边一位陌生女子听见了，立刻拿出包纸巾给我，此等善举，让我倍感荣幸。<br>而善良还需要有原则，否则害人害己。</p><h2 id="懂财富"><a href="#懂财富" class="headerlink" title="懂财富"></a>懂财富</h2><p>穷人之所以穷，是思维的匮乏。要想富起来，不能只在自己身体上投资，而要在大局上有思维的开拓。看透问题的本质。<br>时间是有限，在有限时间内如何快速致富？找到一门自己感兴趣的学科，学以致用，发散思维，与社会息息相关的行业，去做。</p><h2 id="懂社会"><a href="#懂社会" class="headerlink" title="懂社会"></a>懂社会</h2><p>要有抱负，一步一个脚印。要有自己独立的人格，要能为自己所做的事情负责。学会转化一种让自己幸福的能力，然后改变自己。</p><h2 id="懂生死"><a href="#懂生死" class="headerlink" title="懂生死"></a>懂生死</h2><p>生死学里几个词：无死不生，向死而生，知死而后生。颇为有趣且发人深思。人就是因为知道有一天会死去，才会争取好好地活着。<br>我想，真到了那天，我会主动拥抱死亡。</p><blockquote><p>这世界上缺的不是完美的人，而是从心底给出的正义、真心、无畏和同情—这是今天看完《无问西东》后给我最感慨的话。生而为人，便要心之所向，无问西东。<br>大家都知道有因必有果，却不只因果皆由缘而起。叔本华跟尼采，有时间必好好读佳作。</p></blockquote><h2 id="懂远游"><a href="#懂远游" class="headerlink" title="懂远游"></a>懂远游</h2><p>这部分写了琢磨先生在西藏的经历，看过很多书，都是大家想去西藏的。也许去了那里，人真的能体会到人生的不易。<br>美国不如英国自律，日本对美食态度极佳，常把“对不起”挂在嘴边，不喜欢给别人添麻烦。</p><h2 id="懂职场"><a href="#懂职场" class="headerlink" title="懂职场"></a>懂职场</h2><p>首先要懂得吃苦，然后要清楚自己，发掘自己的天赋所在。以终为始，聚焦所做。</p><h2 id="懂教育"><a href="#懂教育" class="headerlink" title="懂教育"></a>懂教育</h2><p>我只知道，每一个出生在这世上的小孩都是纯粹的，如果不好好教育，长大后便不可能为国之栋梁。</p><h2 id="懂娱乐、懂自由"><a href="#懂娱乐、懂自由" class="headerlink" title="懂娱乐、懂自由"></a>懂娱乐、懂自由</h2><p>人生有两个方向：一个方向是往大处拼搏，保持对事业的激情；一个方向是往小处生活，保持做人的温度。<br>每天睁开眼，对自己说声：欧耶</p>]]></content>
      
      
      <categories>
          
          <category> 读书感悟 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>前端面试题</title>
      <link href="/2025/04/18/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
      <url>/2025/04/18/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title=""></a></h1><details>  <summary><strong>var、let、const 三者的区别?</strong></summary><h4 id="✅-作用域"><a href="#✅-作用域" class="headerlink" title="✅ 作用域"></a>✅ 作用域</h4><ol><li><code>var</code> 定义的变量没有块作用域，<strong>可以跨块访问，但不能跨函数访问</strong>。</li><li><code>let</code> 定义的变量有块作用域，<strong>只能在声明的代码块中访问</strong>。</li><li><code>const</code> 定义的是常量，<strong>必须初始化，只能在声明的代码块中访问，且值不可更改</strong>。</li></ol><h4 id="✅-声明规则"><a href="#✅-声明规则" class="headerlink" title="✅ 声明规则"></a>✅ 声明规则</h4><ul><li>同一个变量名，只能用一种声明方式，否则会报错。</li></ul><h4 id="✅-结合-this-的区别"><a href="#✅-结合-this-的区别" class="headerlink" title="✅ 结合 this 的区别"></a>✅ 结合 this 的区别</h4><table><thead><tr><th>特性</th><th>var &#x2F; let &#x2F; const</th></tr></thead><tbody><tr><td>改变 <code>this</code> 指向</td><td>✅ 可以</td></tr><tr><td>第一个参数是 <code>this</code> 要指向的对象</td><td>✅ 是</td></tr><tr><td>没传对象或为 <code>undefined/null</code></td><td>默认指向全局 <code>window</code></td></tr><tr><td>参数传递</td><td><code>apply</code> 用数组，<code>call</code> 用参数列表，<code>bind</code> 可多次传参</td></tr><tr><td>执行方式</td><td><code>apply/call</code> 立即执行，<code>bind</code> 返回新函数</td></tr></tbody></table></details><details>  <summary><strong>什么是事件委托?</strong></summary><!-- 事件委托是一种事件处理机制，它将一个或多个子元素的事件监听**委托给父级或祖先元素**。 --><ul><li>事件委托，会把一个或者一组元素的事件委托到它的父层或者更外层元素上，真正绑定事件的是外层元素，而不是目标元素<br/></li><li>当事件响应到目标元素上时，会通过事件冒泡机制从而触发它的外层元素的绑定事件上，然后在外层元素上去执行函数</li></ul></details><details>  <summary><strong>防抖跟节流的区别是什么？</strong></summary><!-- 事件委托是一种事件处理机制，它将一个或多个子元素的事件监听**委托给父级或祖先元素**。 --><ul><li>防抖：只执行最后一次。事件持续触发，但只有等事件停止触发后 n 秒后才执行函数。<br/></li><li>节流：控制执行频率。持续触发，每 n 秒执行一次函数。</li></ul></details><details>  <summary><strong>Web 前端预防 SQL 注入的方法有哪些？</strong></summary><ol><li>参数化查询：使用预处理语句或参数化查询来避免 SQL 注入。</li><li>验证用户输入：验证用户输入的数据，确保其符合预期格式，避免非法字符等。</li><li>转义特殊字符：在使用用户输入的数据构造 SQL 语句时，对特殊字符进行转义，以防止注入。</li><li>限制权限：限制用户的权限，使其不能执行不安全的 SQL 操作。</li><li>白名单验证：白名单验证是指确保用户输入的数据只能是允许的值，避免非法数据的输入。</li><li>审核代码：定期审核代码，以确保代码的安全性，特别是对于数据库连接和查询部分的代码。</li></ol></details><details>  <summary><strong>http 和 https 的区别</strong></summary><ol><li>https 协议需要到 ca 申请证书，一般免费证书较少，因而需要一定费用。</li><li>http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议。</li><li>http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。</li><li>http 的连接很简单，是无状态的；HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 http 协议安全。</li></ol></details><details>  <summary><strong>created跟mounted的区别</strong></summary><ul><li>created发生在mounted之前，此时DOM元素还没完全渲染出来，不过跟后端联调时候的请求可以放在这里，尽早获取到数据返回给变量。</li><li>mounted这时候已经可以获取页面中的DOM元素了。</li></ul></details><details>  <summary><strong>说说事件循环机制</strong></summary><h3 id="🔁-什么是事件循环？"><a href="#🔁-什么是事件循环？" class="headerlink" title="🔁 什么是事件循环？"></a>🔁 什么是事件循环？</h3><p>JavaScript 是单线程语言，执行代码时除了依赖<strong>调用栈</strong>，还依赖<strong>任务队列</strong>来控制异步代码的执行顺序。</p><p>整个执行过程称为 <strong>事件循环（Event Loop）</strong>。</p><h3 id="🧠-事件循环的核心概念："><a href="#🧠-事件循环的核心概念：" class="headerlink" title="🧠 事件循环的核心概念："></a>🧠 事件循环的核心概念：</h3><ul><li>一个线程中只有一个事件循环（主循环）。</li><li>可以有多个任务队列，按类型分为：<ul><li><strong>宏任务（Macro Task）</strong></li><li><strong>微任务（Micro Task）</strong></li></ul></li></ul><hr><h3 id="⏱-执行顺序是怎样的？"><a href="#⏱-执行顺序是怎样的？" class="headerlink" title="⏱ 执行顺序是怎样的？"></a>⏱ 执行顺序是怎样的？</h3><div style="color: #fc6423"><strong>执行顺序：</strong></div><blockquote><p><strong>宏任务 ➝ 微任务（清空） ➝ 下一个宏任务 ➝ 微任务（清空）… 依此循环</strong></p></blockquote><ol><li>执行一个宏任务（如 script 整体代码）</li><li>在当前宏任务中执行所有产生的微任务</li><li>若微任务中又产生新的微任务，继续执行，直到清空微任务队列</li><li>开始下一轮宏任务循环</li></ol><hr><h3 id="🧩-宏任务（Macro-Task）有哪些？"><a href="#🧩-宏任务（Macro-Task）有哪些？" class="headerlink" title="🧩 宏任务（Macro Task）有哪些？"></a>🧩 宏任务（Macro Task）有哪些？</h3><ul><li><code>script</code>（整体代码）</li><li><code>setTimeout</code></li><li><code>setInterval</code></li><li><code>setImmediate</code>（Node.js）</li><li><code>I/O 操作</code></li><li><code>UI 渲染</code></li></ul><h3 id="🧬-微任务（Micro-Task）有哪些？"><a href="#🧬-微任务（Micro-Task）有哪些？" class="headerlink" title="🧬 微任务（Micro Task）有哪些？"></a>🧬 微任务（Micro Task）有哪些？</h3><ul><li><code>process.nextTick</code>（Node.js 专属，优先级更高）</li><li><code>Promise.then / catch / finally</code></li><li><code>async / await</code></li><li><code>MutationObserver</code></li></ul></details><details>  <summary><strong>说说 css 盒模型</strong></summary><p>  css 中的盒子模型包括 IE 盒子模型和标准的 W3C 盒子模型</p><p>  在标准的盒子模型中，width 指 content 部分的宽度，box-sizing:content-box(默认为content-box);</p><p>  在 IE 盒子模型中，width 指的是 content+padding+border，box-sizing:border-box;</p><p>  Box-sizing:padding-box 宽度包含了左右 padding+width</p></details><details>  <summary><strong>vue2 和 vue3 的区别</strong></summary><ol><li>双向数据绑定原理不同,vue2 使用 Es5 的 API defineProperty()对数据进行劫持, 只能监听某个属性,不能对整个对象监听;vue3 使用 ES6 的 proxy API 对数据代理, 可以监听整个对象和数组</li><li>生命周期不同<br>  vue2:beforeCreate、created 、beforeMount、mounted、beforeUpdate、updated、<br>  beforeDestroy、destroyed<br>  vue3:setup 、onBeforeMount 、 onMounted 、onBeforeUpdate 、onUpdated 、<br>  onBeforeUnmount、onUnmounted</li><li>vue2 必须有根标签,vue3 可以没有根标签,会默认将多个根标签包裹在 fragment虚拟标签中</li><li>vue2 采用选项式 API,将函数和数据统一起来处理,将功能点切割了,当逻辑复杂时不利于代码阅读;vue3 采用组合式 API,将同一个功能的代码统一起来处理,使代码更有序,有利于代码的书写和维护</li><li>vue2 和 vue3 匿名插槽不一样<br>  具名插槽使用方式不同：vue2 使用 slot&#x3D;’’,vue3 使用 v-slot:’’<br>  作用域插槽使用方式不同：vue2 中在父组件中使用 slot-scope&#x3D;”data”从子组件获取数据，vue3 中在父组件中使用 #data 或者 #default&#x3D;”{data}”获取</li></ol></details><!-- ## 推荐 --><!-- - [娱乐一下](https://edunextgen1.com) -->]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>redis</title>
      <link href="/2025/04/16/redis/"/>
      <url>/2025/04/16/redis/</url>
      
        <content type="html"><![CDATA[<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p><a href="#redis-token%E7%BC%93%E5%AD%98">redis-token缓存</a><br><a href="#jwt%E8%B7%9Fredis%E5%AD%98token%E7%9A%84%E5%8C%BA%E5%88%AB">jwt跟redis存token的区别</a><br><a href="#redis%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86">redis相关知识</a><br><a href="#%E6%8E%A8%E8%8D%90">推荐</a></p><h2 id="redis-token缓存"><a href="#redis-token缓存" class="headerlink" title="redis-token缓存"></a>redis-token缓存</h2><ul><li><p>redis.js创建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">const redis = require(&quot;redis&quot;);</span><br><span class="line"></span><br><span class="line">// Redis 链接的配置内容</span><br><span class="line">const client = redis.createClient(&#123;</span><br><span class="line">  socket: &#123;</span><br><span class="line">    host: &#x27;192.168.64.2&#x27;,  // Redis 服务器地址</span><br><span class="line">    port: 6379,             // Redis 端口</span><br><span class="line">  &#125;,</span><br><span class="line">  password: &#x27;123456&#x27;        // Redis 密码</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 连接到 Redis</span><br><span class="line">client.connect()</span><br><span class="line">  .then(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;Connected to Redis&#x27;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch((err) =&gt; &#123;</span><br><span class="line">    console.error(&#x27;Redis connection failed:&#x27;, err);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// 处理连接错误</span><br><span class="line">client.on(&quot;error&quot;, (err) =&gt; &#123;</span><br><span class="line">  console.error(&#x27;Redis error:&#x27;, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 定义 Redis 操作方法</span><br><span class="line">const redisOps = &#123;</span><br><span class="line">  // 创建值</span><br><span class="line">  set: async (key, value, expiration = null) =&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      value = JSON.stringify(value);</span><br><span class="line">      if (Number.isInteger(expiration) &amp;&amp; expiration &gt; 0) &#123;</span><br><span class="line">        // 如果设置了有效时间并且是整数，使用 SETEX 命令</span><br><span class="line">        await client.setEx(key, expiration, value);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // 否则直接使用 SET 命令</span><br><span class="line">        await client.set(key, value);</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(`Key &quot;$&#123;key&#125;&quot; set successfully with expiration: $&#123;expiration || &#x27;no expiration&#x27;&#125;`);</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">      console.error(&#x27;Error setting value:&#x27;, err);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 删除值</span><br><span class="line">  del: async (key) =&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      await client.del(key);</span><br><span class="line">      console.log(`Key &quot;$&#123;key&#125;&quot; deleted successfully`);</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">      console.error(&#x27;Error deleting key:&#x27;, err);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 获取值</span><br><span class="line">  get: async (key) =&gt; &#123;</span><br><span class="line">    const result = await client.get(key);</span><br><span class="line">    console.log(&#x27;99999=&#x27;, result)</span><br><span class="line">    try &#123;</span><br><span class="line">      return result; // 尝试解析为 JSON</span><br><span class="line">    &#125; catch (error) &#123;</span><br><span class="line">      // 如果不是 JSON 格式，直接返回原始值</span><br><span class="line">      console.warn(`Warning: Value for key &quot;$&#123;key&#125;&quot; is not JSON formatted.`);</span><br><span class="line">      return result;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 获取键的 TTL</span><br><span class="line">  ttl: async (key) =&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      const timeLeft = await client.ttl(key);</span><br><span class="line">      console.log(`Key &quot;$&#123;key&#125;&quot; has TTL: $&#123;timeLeft&#125;`);</span><br><span class="line">      return timeLeft;</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">      console.error(&#x27;Error getting TTL:&#x27;, err);</span><br><span class="line">      return err;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = redisOps;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>redis的使用</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const redisOps = require(&quot;./redis.js&quot;);</span><br><span class="line">const moment = require(&#x27;moment-timezone&#x27;);</span><br><span class="line"></span><br><span class="line">let token = jwt.sign(&#123; id: user.userid, username: user.username &#125;, secretKey, &#123; expiresIn: &#x27;1h&#x27; &#125;);</span><br><span class="line"></span><br><span class="line">await redisOps.set(user.userid.toString(), token, 60 * 60)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//token校验</span><br><span class="line">const verifyToken = async (ctx, next) =&gt; &#123;</span><br><span class="line">    const userid = ctx.headers[&#x27;cookie&#x27;];</span><br><span class="line">    const match = userid.match(/userid=(\d+)/);</span><br><span class="line">    const userId = match ? match[1] : null;</span><br><span class="line">    </span><br><span class="line">    if (!userId) &#123;</span><br><span class="line">        ctx.status = 401;</span><br><span class="line">        console.log(&#x27;No token provided&#x27;);</span><br><span class="line">        ctx.body = &#123; message: &#x27;No token provided&#x27; &#125;;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        const startTime = moment(); // 记录开始时间</span><br><span class="line">        const getuserid = await redisOps.get(userId)</span><br><span class="line">        const endTime = moment(); // 记录结束时间</span><br><span class="line">        const duration = moment.duration(endTime.diff(startTime)); // 计算持续时间</span><br><span class="line">      </span><br><span class="line">        console.log(`Request completed in $&#123;duration.asMilliseconds()&#125; ms`); // 以毫秒为单位输出耗时</span><br><span class="line">        if(getuserid)&#123;</span><br><span class="line">            await next();</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            throw err;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">        console.log(&#x27;Token verification failed:&#x27;, err.message);</span><br><span class="line">        ctx.status = 401;</span><br><span class="line">        ctx.body = &#123; message: &#x27;Failed to authenticate token&#x27; &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="jwt跟redis存token的区别"><a href="#jwt跟redis存token的区别" class="headerlink" title="jwt跟redis存token的区别"></a>jwt跟redis存token的区别</h2><table><thead><tr><th>维度</th><th><strong>JWT</strong></th><th><strong>Redis</strong></th></tr></thead><tbody><tr><td>性能</td><td>- 无需查询数据库或访问外部存储，验证速度较快<br/>- 适用于简单的身份验证场景</td><td>- 需要与 Redis 服务器进行通信，可能会有网络延迟<br/>- 适用于复杂的会话管理和存储需求</td></tr></tbody></table><h2 id="redis相关知识"><a href="#redis相关知识" class="headerlink" title="redis相关知识"></a>redis相关知识</h2><ul><li><p>redis本质上是一个key-value类型的内存数据库，性能最快的key-value数据库。</p></li><li><p>正常情况是把数据存储在数据库 ，数据库把数据存在磁盘。但越上层的存储器存储效率越高，内存位于磁盘之上。而redis是一款基于内存的存储系统，数据都存在内存里，所以从redis读取数据会比从数据库读取要快。</p></li><li><p>内存有限，存储不了太多数据。出现故障时，用主从复制、哨兵法。集群就是一套完整的redis多机解决方案。他有效解决了单机redis的所有问题。当你在集群中为某个节点配置从机的时候，主从节点间同步就是主从复制。主节点挂掉之后，从节点的选取，内部逻辑与哨兵机制相似。</p></li><li><p>支持发布&#x2F;订阅模式，可以作为一个简单而高效的轻量级消息代理，用于实现消息队列、实时通知等。</p></li></ul><!-- ## 推荐 --><!-- - [娱乐一下](https://edunextgen1.com) -->]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ELK安装流程</title>
      <link href="/2025/04/11/ELK%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B/"/>
      <url>/2025/04/11/ELK%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="使用-Docker-安装-ELK-Stack（ElasticSearch、Logstash、Kibana）"><a href="#使用-Docker-安装-ELK-Stack（ElasticSearch、Logstash、Kibana）" class="headerlink" title="使用 Docker 安装 ELK Stack（ElasticSearch、Logstash、Kibana）"></a>使用 Docker 安装 ELK Stack（ElasticSearch、Logstash、Kibana）</h1><blockquote><p>建议在 Docker 上安装，资源占用少。以下安装版本统一为 <strong>8.12.2</strong>，建议保持一致避免冲突。</p></blockquote><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p><a href="#1%E3%80%81%E5%AE%89%E8%A3%85-ElasticSearch">1、安装 ElasticSearch</a><br><a href="#2%E3%80%81%E5%AE%89%E8%A3%85-Logstash">2、安装 Logstash</a><br><a href="#3%E3%80%81%E5%AE%89%E8%A3%85-Kibana">3、安装 Kibana</a><br><a href="#%E6%8E%A8%E8%8D%90">推荐</a></p><hr><h2 id="1、安装-ElasticSearch"><a href="#1、安装-ElasticSearch" class="headerlink" title="1、安装 ElasticSearch"></a>1、安装 ElasticSearch</h2><ul><li>拉取镜像：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull elasticsearch:8.12.2</span><br></pre></td></tr></table></figure><ul><li>启动容器：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name some-elasticsearch -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span> -d elasticsearch:8.12.2</span><br></pre></td></tr></table></figure><ul><li>进入容器内部：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker <span class="built_in">exec</span> -u 0 -it some-elasticsearch bash</span><br></pre></td></tr></table></figure><ul><li>重启容器：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart some-elasticsearch</span><br></pre></td></tr></table></figure><hr><h2 id="2、安装-Logstash"><a href="#2、安装-Logstash" class="headerlink" title="2、安装 Logstash"></a>2、安装 Logstash</h2><ul><li>拉取镜像：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.elastic.co/logstash/logstash:8.12.2</span><br></pre></td></tr></table></figure><ul><li>启动容器：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -it -p 5044:5044 -p 9600:9600 --name logstash -v /usr/share/logstash/piplines:/usr/share/logstash/config --privileged=<span class="literal">true</span> docker.elastic.co/logstash/logstash:8.12.2 /bin/bash</span><br></pre></td></tr></table></figure><ul><li>使用 <code>scp</code> 命令将本机下载好的 jar 包（MySQL Connector）上传至虚拟机：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp <span class="string">&quot;/Users/Downloads/logstash-8.12.2/mysql-connector-j-8.4.0.jar&quot;</span> 用户名@虚拟机IP:/home</span><br></pre></td></tr></table></figure><ul><li>再将 jar 包从虚拟机移动到 logstash 容器中：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">cp</span> ./mysql-connector-j-8.4.0.jar logstash:/usr/share/logstash</span><br></pre></td></tr></table></figure><ul><li>进入容器内部：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -u 0 -it logstash bash</span><br></pre></td></tr></table></figure><hr><h2 id="3、安装-Kibana"><a href="#3、安装-Kibana" class="headerlink" title="3、安装 Kibana"></a>3、安装 Kibana</h2><ul><li>拉取镜像：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull kibana:8.12.2</span><br></pre></td></tr></table></figure><ul><li>启动容器：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name some-kibana -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span> -d elasticsearch:8.12.2</span><br></pre></td></tr></table></figure><ul><li>进入容器：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -u 0 -it some-kibana bash</span><br></pre></td></tr></table></figure><hr><h2 id="附：安装-Docker、Portainer-及相关命令"><a href="#附：安装-Docker、Portainer-及相关命令" class="headerlink" title="附：安装 Docker、Portainer 及相关命令"></a>附：安装 Docker、Portainer 及相关命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install docker.io docker-compose</span><br><span class="line">docker -v</span><br><span class="line"><span class="built_in">sudo</span> systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> docker search portainer</span><br><span class="line">docker pull portainer/portainer</span><br><span class="line"><span class="built_in">sudo</span> docker pull portainer/portainer</span><br><span class="line"><span class="built_in">sudo</span> docker run -d --name portainerUI -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> docker start portainerUI</span><br><span class="line"><span class="built_in">sudo</span> passwd root</span><br></pre></td></tr></table></figure><hr><!-- ## 推荐 --><!-- - [娱乐一下](https://edunextgen1.com) -->]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>GitLab CI/CD</title>
      <link href="/2025/04/10/gitlabci/"/>
      <url>/2025/04/10/gitlabci/</url>
      
        <content type="html"><![CDATA[<h1 id="前端项目-GitLab-CI-CD-持续集成部署指南（Mac-环境）"><a href="#前端项目-GitLab-CI-CD-持续集成部署指南（Mac-环境）" class="headerlink" title="前端项目 GitLab CI&#x2F;CD 持续集成部署指南（Mac 环境）"></a>前端项目 GitLab CI&#x2F;CD 持续集成部署指南（Mac 环境）</h1><h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>在日常开发过程中，我们经常需要将打包后的 <code>dist</code> 包手动发送给后端部署，效率低且容易出错。CI（Continuous Integration，持续集成）可以自动化这一过程，本文将介绍如何通过 GitLab CI 实现持续集成部署。</p><hr><h2 id="一、安装-GitLab-Runner"><a href="#一、安装-GitLab-Runner" class="headerlink" title="一、安装 GitLab Runner"></a>一、安装 GitLab Runner</h2><p>请参考官方文档：<a href="https://docs.gitlab.com/runner/install/">GitLab Runner 安装指南</a></p><hr><h2 id="二、本地注册-Runner"><a href="#二、本地注册-Runner" class="headerlink" title="二、本地注册 Runner"></a>二、本地注册 Runner</h2><ol><li>打开你的 GitLab 项目页面，进入 <strong>Settings → CI&#x2F;CD</strong>，展开 <strong>Runners</strong> 部分。</li><li>记住显示的 <strong>URL</strong> 和 <strong>token</strong>，用于后续注册。</li></ol><h3 id="执行注册命令"><a href="#执行注册命令" class="headerlink" title="执行注册命令"></a>执行注册命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner register</span><br></pre></td></tr></table></figure><p>按照提示依次输入以下信息：</p><ul><li>GitLab CI Coordinator URL: <code>https://gitlab.com</code></li><li>GitLab CI Token: <code>xxx</code>（从项目中复制）</li><li>Tags: <code>my-tag,another-tag</code>（自定义）</li><li>Description: <code>my-runner</code>（自定义）</li><li>Executor: <code>shell</code>（Mac 上建议选择 shell）</li></ul><p>注册完成后，回到 GitLab CI&#x2F;CD 设置页面，可看到 Runner 状态为绿色，说明已成功运行。如果不是绿色，请执行以下命令启动 Runner 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner run</span><br></pre></td></tr></table></figure><hr><h2 id="三、编写-gitlab-ci-yml-文件并提交"><a href="#三、编写-gitlab-ci-yml-文件并提交" class="headerlink" title="三、编写 .gitlab-ci.yml 文件并提交"></a>三、编写 <code>.gitlab-ci.yml</code> 文件并提交</h2><p>将以下内容保存为 <code>.gitlab-ci.yml</code>，并 push 到 GitLab：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy_to_test:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">yarn</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">dist/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">yarn</span> <span class="string">build</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ls</span> <span class="string">-l</span> <span class="string">-t</span> <span class="string">./dist/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rsync</span> <span class="string">-avz</span> <span class="string">./dist/</span> <span class="string">root@xxx.xx.xx.xxx:/dist</span></span><br></pre></td></tr></table></figure><ul><li>这段 CI 脚本会自动打包项目，并使用 <code>rsync</code> 将 <code>dist</code> 目录部署到远程服务器。</li></ul><hr><h2 id="四、通过-Docker-实现-CI（可选）"><a href="#四、通过-Docker-实现-CI（可选）" class="headerlink" title="四、通过 Docker 实现 CI（可选）"></a>四、通过 Docker 实现 CI（可选）</h2><p>如果需要通过 Docker 实现更完整的 CI&#x2F;CD 流程，继续以下步骤：</p><h3 id="1-安装-Docker（Mac）"><a href="#1-安装-Docker（Mac）" class="headerlink" title="1. 安装 Docker（Mac）"></a>1. 安装 Docker（Mac）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask docker</span><br></pre></td></tr></table></figure><h3 id="2-拉取-GitLab-镜像"><a href="#2-拉取-GitLab-镜像" class="headerlink" title="2. 拉取 GitLab 镜像"></a>2. 拉取 GitLab 镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull drud/gitlab-ce:v0.29.1</span><br></pre></td></tr></table></figure><h3 id="3-创建-GitLab-容器"><a href="#3-创建-GitLab-容器" class="headerlink" title="3. 创建 GitLab 容器"></a>3. 创建 GitLab 容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8443:443 -p 8090:80 -p 8022:22 --restart always --name gitlab drud/gitlab-ce:v0.29.1</span><br></pre></td></tr></table></figure><p>说明：</p><ul><li><code>-p 8443:443</code>：映射 HTTPS 端口</li><li><code>-p 8090:80</code>：映射 HTTP 端口</li><li><code>-p 8022:22</code>：映射 SSH 端口</li><li><code>--restart always</code>：容器崩溃或主机重启时自动恢复</li><li><code>--name gitlab</code>：容器命名为 <code>gitlab</code></li></ul><p>访问地址：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8090/</span><br></pre></td></tr></table></figure><hr><h2 id="五、Docker-模式下的-gitlab-ci-yml-示例"><a href="#五、Docker-模式下的-gitlab-ci-yml-示例" class="headerlink" title="五、Docker 模式下的 .gitlab-ci.yml 示例"></a>五、Docker 模式下的 <code>.gitlab-ci.yml</code> 示例</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">TEST_NAME:</span> <span class="string">&quot;tips&quot;</span></span><br><span class="line">  <span class="attr">OUT_PORT:</span> <span class="string">&quot;8081&quot;</span></span><br><span class="line">  <span class="attr">IN_PORT:</span> <span class="string">&quot;8081&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy_to_test:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">before_script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">if</span> [ <span class="string">$(docker</span> <span class="string">ps</span> <span class="string">-aq</span> <span class="string">--filter</span> <span class="string">name=$CI_PROJECT_NAME)</span> ]<span class="string">;</span> <span class="string">then</span> <span class="string">docker</span> <span class="string">rm</span> <span class="string">-f</span> <span class="string">$CI_PROJECT_NAME;</span> <span class="string">fi</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-f</span> <span class="string">Dockerfile</span> <span class="string">-t</span> <span class="string">$TEST_NAME:latest</span> <span class="string">.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">run</span> <span class="string">-d</span> <span class="string">-p</span> <span class="string">$OUT_PORT:$IN_PORT</span> <span class="string">--name</span> <span class="string">$TEST_NAME</span> <span class="string">$TEST_NAME:latest</span></span><br></pre></td></tr></table></figure><p>部署成功后，在 GitLab 的 CI&#x2F;CD Pipelines 页面可看到构建过程，在 <strong>Containers</strong> 页面会生成新容器，点击对应端口即可访问部署后的页面。</p><hr><!-- ## 推荐 --><!-- - [娱乐一下](https://edunextgen1.com) --><!-- - [前端持续集成部署 CI/CD - CSDN](https://blog.csdn.net) -->]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
